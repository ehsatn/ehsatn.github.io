var a0_0x115dad=a0_0x207b;(function(_0x22c80e,_0x43e21d){var _0x1f7b11=a0_0x207b,_0x33642d=_0x22c80e();while(!![]){try{var _0x2a042d=-parseInt(_0x1f7b11(0x16b))/0x1*(parseInt(_0x1f7b11(0x14c))/0x2)+-parseInt(_0x1f7b11(0x149))/0x3+parseInt(_0x1f7b11(0x180))/0x4+parseInt(_0x1f7b11(0x152))/0x5+-parseInt(_0x1f7b11(0x19c))/0x6+parseInt(_0x1f7b11(0x169))/0x7+parseInt(_0x1f7b11(0x17d))/0x8;if(_0x2a042d===_0x43e21d)break;else _0x33642d['push'](_0x33642d['shift']());}catch(_0xc8b6e1){_0x33642d['push'](_0x33642d['shift']());}}}(a0_0x45f6,0x77bd1));function calcRSI(_0x3b3e04,_0xe37d68){var _0x2f1bf6=a0_0x207b;if(!_0x3b3e04||_0x3b3e04[_0x2f1bf6(0x189)]<_0xe37d68+0x1)return 0x32;_0xe37d68=_0xe37d68||0xe;var _0xaa571e=0x0,_0x36fcff=0x0;for(var _0x6c05fb=0x1;_0x6c05fb<=_0xe37d68;_0x6c05fb++){var _0x2eec73=_0x3b3e04[_0x6c05fb]-_0x3b3e04[_0x6c05fb-0x1];if(_0x2eec73>0x0)_0xaa571e+=_0x2eec73;else _0x36fcff-=_0x2eec73;}var _0x56b8ac=_0xaa571e/_0xe37d68,_0x210682=_0x36fcff/_0xe37d68;for(var _0x58d438=_0xe37d68+0x1;_0x58d438<_0x3b3e04[_0x2f1bf6(0x189)];_0x58d438++){var _0x2eec73=_0x3b3e04[_0x58d438]-_0x3b3e04[_0x58d438-0x1];_0x2eec73>0x0?(_0x56b8ac=(_0x56b8ac*(_0xe37d68-0x1)+_0x2eec73)/_0xe37d68,_0x210682=_0x210682*(_0xe37d68-0x1)/_0xe37d68):(_0x56b8ac=_0x56b8ac*(_0xe37d68-0x1)/_0xe37d68,_0x210682=(_0x210682*(_0xe37d68-0x1)-_0x2eec73)/_0xe37d68);}if(_0x210682===0x0)return 0x64;var _0x4d855b=_0x56b8ac/_0x210682;return 0x64-0x64/(0x1+_0x4d855b);}function calcEMA(_0xfac6d4,_0x232bce){var _0x229c76=a0_0x207b;if(!_0xfac6d4||_0xfac6d4[_0x229c76(0x189)]<_0x232bce)return _0xfac6d4?_0xfac6d4[_0xfac6d4[_0x229c76(0x189)]-0x1]:0x0;var _0x4f41ec=0x2/(_0x232bce+0x1),_0x4159bb=_0xfac6d4[_0x229c76(0x167)](0x0,_0x232bce)['reduce'](function(_0x2af1c6,_0x23cee8){return _0x2af1c6+_0x23cee8;},0x0)/_0x232bce;for(var _0x2ea557=_0x232bce;_0x2ea557<_0xfac6d4[_0x229c76(0x189)];_0x2ea557++){_0x4159bb=(_0xfac6d4[_0x2ea557]-_0x4159bb)*_0x4f41ec+_0x4159bb;}return _0x4159bb;}function calcMACD(_0x2bad41){var _0x1ef565=a0_0x207b;if(!_0x2bad41||_0x2bad41['length']<0x1a)return{'line':0x0,'signal':0x0,'histogram':0x0};var _0xd4d820=0x2/0xd,_0x2e3956=0x2/0x1b,_0x4bb5ce=0x2/0xa,_0x4a97c6=_0x2bad41[_0x1ef565(0x167)](0x0,0xc)[_0x1ef565(0x153)](function(_0x4d3ab9,_0x5d44af){return _0x4d3ab9+_0x5d44af;},0x0)/0xc;for(var _0x3c3db0=0xc;_0x3c3db0<0x1a;_0x3c3db0++){_0x4a97c6=(_0x2bad41[_0x3c3db0]-_0x4a97c6)*_0xd4d820+_0x4a97c6;}var _0x5e5875=_0x2bad41[_0x1ef565(0x167)](0x0,0x1a)['reduce'](function(_0x4c159d,_0x5c13dd){return _0x4c159d+_0x5c13dd;},0x0)/0x1a,_0x593826=[];for(var _0x4d05bd=0x1a;_0x4d05bd<_0x2bad41[_0x1ef565(0x189)];_0x4d05bd++){_0x4a97c6=(_0x2bad41[_0x4d05bd]-_0x4a97c6)*_0xd4d820+_0x4a97c6,_0x5e5875=(_0x2bad41[_0x4d05bd]-_0x5e5875)*_0x2e3956+_0x5e5875,_0x593826[_0x1ef565(0x151)](_0x4a97c6-_0x5e5875);}var _0x5326ba=_0x4a97c6-_0x5e5875;if(_0x593826['length']<0x9)return{'line':_0x5326ba,'signal':0x0,'histogram':_0x5326ba};var _0xd56019=_0x593826['slice'](0x0,0x9)[_0x1ef565(0x153)](function(_0x5e5f94,_0x21be23){return _0x5e5f94+_0x21be23;},0x0)/0x9;for(var _0x18e277=0x9;_0x18e277<_0x593826[_0x1ef565(0x189)];_0x18e277++){_0xd56019=(_0x593826[_0x18e277]-_0xd56019)*_0x4bb5ce+_0xd56019;}return{'line':_0x5326ba,'signal':_0xd56019,'histogram':_0x5326ba-_0xd56019};}function calcBB(_0x541d15,_0x517ba3,_0x42ac18){var _0x524b9d=a0_0x207b;if(!_0x541d15||_0x541d15[_0x524b9d(0x189)]<_0x517ba3){var _0x41204b=_0x541d15?_0x541d15[_0x541d15[_0x524b9d(0x189)]-0x1]:0x0;return{'upper':_0x41204b*1.02,'middle':_0x41204b,'lower':_0x41204b*0.98};}_0x517ba3=_0x517ba3||0x14,_0x42ac18=_0x42ac18||0x2;var _0xb90270=_0x541d15[_0x524b9d(0x167)](-_0x517ba3),_0x2ebf49=_0xb90270[_0x524b9d(0x153)](function(_0x36ef6a,_0x21e9cd){return _0x36ef6a+_0x21e9cd;},0x0)/_0x517ba3,_0x3b4426=_0xb90270[_0x524b9d(0x15b)](function(_0x286286){var _0x6394c3=_0x524b9d;return Math[_0x6394c3(0x198)](_0x286286-_0x2ebf49,0x2);}),_0x55e76a=_0x3b4426['reduce'](function(_0x15d529,_0x5e16a1){return _0x15d529+_0x5e16a1;},0x0)/_0x517ba3,_0x3edbdb=Math[_0x524b9d(0x150)](_0x55e76a);return{'upper':_0x2ebf49+_0x3edbdb*_0x42ac18,'middle':_0x2ebf49,'lower':_0x2ebf49-_0x3edbdb*_0x42ac18};}function calcATR(_0x4258c2,_0x375595,_0x1ad718){var _0x43bc0b=a0_0x207b;if(!_0x4258c2||_0x4258c2['length']<_0x375595+0x1)return _0x1ad718?_0x1ad718*0.02:0x0;var _0x26ddc5=[];for(var _0x577218=0x1;_0x577218<_0x4258c2[_0x43bc0b(0x189)];_0x577218++){var _0x51a064=_0x4258c2[_0x577218]['h']||0x0,_0x2d6ac1=_0x4258c2[_0x577218]['l']||0x0,_0xccb9dc=_0x4258c2[_0x577218-0x1]['c']||0x0;if(!isFinite(_0x51a064)||!isFinite(_0x2d6ac1)||!isFinite(_0xccb9dc))continue;var _0x5c3195=Math[_0x43bc0b(0x172)](_0x51a064-_0x2d6ac1,Math['abs'](_0x51a064-_0xccb9dc),Math[_0x43bc0b(0x15a)](_0x2d6ac1-_0xccb9dc));isFinite(_0x5c3195)&&_0x5c3195>0x0&&_0x26ddc5['push'](_0x5c3195);}if(_0x26ddc5['length']<_0x375595)return _0x1ad718?_0x1ad718*0.02:0x0;var _0xddae8b=_0x26ddc5[_0x43bc0b(0x167)](0x0,_0x375595)[_0x43bc0b(0x153)](function(_0x7228b0,_0x34a8d6){return _0x7228b0+_0x34a8d6;},0x0)/_0x375595;for(var _0x1278fe=_0x375595;_0x1278fe<_0x26ddc5[_0x43bc0b(0x189)];_0x1278fe++){_0xddae8b=(_0xddae8b*(_0x375595-0x1)+_0x26ddc5[_0x1278fe])/_0x375595;}return isFinite(_0xddae8b)?_0xddae8b:_0x1ad718?_0x1ad718*0.02:0x0;}function calcADX(_0x3792a5,_0x2f046e){var _0x4d6e50=a0_0x207b;if(!_0x3792a5||!Array[_0x4d6e50(0x148)](_0x3792a5)||_0x3792a5[_0x4d6e50(0x189)]<_0x2f046e*0x2)return{'adx':0x19,'diPlus':0x0,'diMinus':0x0,'trend':_0x4d6e50(0x165)};_0x2f046e=_0x2f046e||0xe;var _0x1e2127={'adx':0x19,'diPlus':0x0,'diMinus':0x0,'trend':_0x4d6e50(0x165)};try{var _0x5d5cb7=[],_0x4cf4db=[],_0x451ae2=[];for(var _0x230f0d=0x1;_0x230f0d<_0x3792a5['length'];_0x230f0d++){var _0x2a7405=_0x3792a5[_0x230f0d-0x1]['c']||0x0,_0x3d2a24=_0x3792a5[_0x230f0d]['h']||0x0,_0x3a8847=_0x3792a5[_0x230f0d]['l']||0x0,_0x4d72ca=_0x3792a5[_0x230f0d-0x1]['h']||_0x3d2a24,_0x573942=_0x3792a5[_0x230f0d-0x1]['l']||_0x3a8847;if(!isFinite(_0x2a7405)||!isFinite(_0x3d2a24)||!isFinite(_0x3a8847))continue;var _0x3935ac=Math[_0x4d6e50(0x172)](_0x3d2a24-_0x3a8847,Math[_0x4d6e50(0x15a)](_0x3d2a24-_0x2a7405),Math[_0x4d6e50(0x15a)](_0x3a8847-_0x2a7405));_0x5d5cb7[_0x4d6e50(0x151)](isFinite(_0x3935ac)&&_0x3935ac>0x0?_0x3935ac:0x0);var _0x4e249a=_0x3d2a24-_0x4d72ca,_0x322115=_0x573942-_0x3a8847;if(_0x4e249a>_0x322115&&_0x4e249a>0x0)_0x4cf4db[_0x4d6e50(0x151)](_0x4e249a),_0x451ae2[_0x4d6e50(0x151)](0x0);else _0x322115>_0x4e249a&&_0x322115>0x0?(_0x4cf4db[_0x4d6e50(0x151)](0x0),_0x451ae2['push'](_0x322115)):(_0x4cf4db[_0x4d6e50(0x151)](0x0),_0x451ae2['push'](0x0));}if(_0x5d5cb7[_0x4d6e50(0x189)]<_0x2f046e*0x2||_0x4cf4db['length']<_0x2f046e*0x2)return _0x1e2127;var _0x90a2e3=0x0,_0x2ced6a=0x0,_0x5ba2f3=0x0;for(var _0x28e17a=0x0;_0x28e17a<_0x2f046e;_0x28e17a++){_0x90a2e3+=_0x5d5cb7[_0x28e17a],_0x2ced6a+=_0x4cf4db[_0x28e17a],_0x5ba2f3+=_0x451ae2[_0x28e17a];}var _0x520a39=[];for(var _0x509ca1=_0x2f046e;_0x509ca1<_0x5d5cb7[_0x4d6e50(0x189)];_0x509ca1++){_0x90a2e3=_0x90a2e3-_0x90a2e3/_0x2f046e+_0x5d5cb7[_0x509ca1],_0x2ced6a=_0x2ced6a-_0x2ced6a/_0x2f046e+_0x4cf4db[_0x509ca1],_0x5ba2f3=_0x5ba2f3-_0x5ba2f3/_0x2f046e+_0x451ae2[_0x509ca1];var _0x279937=_0x90a2e3>0x0?_0x2ced6a/_0x90a2e3*0x64:0x0,_0xdf418a=_0x90a2e3>0x0?_0x5ba2f3/_0x90a2e3*0x64:0x0,_0x481ccb=_0x279937+_0xdf418a,_0x67b8c8=_0x481ccb>0x0?Math[_0x4d6e50(0x15a)](_0x279937-_0xdf418a)/_0x481ccb*0x64:0x0;_0x520a39[_0x4d6e50(0x151)]({'dx':_0x67b8c8,'diPlus':_0x279937,'diMinus':_0xdf418a});}if(_0x520a39[_0x4d6e50(0x189)]<_0x2f046e)return _0x1e2127;var _0x875259=0x0;for(var _0x5f2b9d=0x0;_0x5f2b9d<_0x2f046e;_0x5f2b9d++){_0x875259+=_0x520a39[_0x5f2b9d]['dx'];}_0x875259/=_0x2f046e;for(var _0x51a764=_0x2f046e;_0x51a764<_0x520a39[_0x4d6e50(0x189)];_0x51a764++){_0x875259=(_0x875259*(_0x2f046e-0x1)+_0x520a39[_0x51a764]['dx'])/_0x2f046e;}var _0x57853f=_0x520a39[_0x520a39[_0x4d6e50(0x189)]-0x1];_0x1e2127[_0x4d6e50(0x174)]=isFinite(_0x875259)?Math[_0x4d6e50(0x170)](_0x875259*0xa)/0xa:0x19,_0x1e2127['diPlus']=isFinite(_0x57853f[_0x4d6e50(0x176)])?Math[_0x4d6e50(0x170)](_0x57853f[_0x4d6e50(0x176)]*0xa)/0xa:0x0,_0x1e2127[_0x4d6e50(0x14a)]=isFinite(_0x57853f[_0x4d6e50(0x14a)])?Math[_0x4d6e50(0x170)](_0x57853f[_0x4d6e50(0x14a)]*0xa)/0xa:0x0;if(_0x1e2127[_0x4d6e50(0x174)]>=0x19&&_0x1e2127[_0x4d6e50(0x176)]>_0x1e2127[_0x4d6e50(0x14a)])_0x1e2127[_0x4d6e50(0x144)]=_0x4d6e50(0x17c);else{if(_0x1e2127[_0x4d6e50(0x174)]>=0x19&&_0x1e2127[_0x4d6e50(0x14a)]>_0x1e2127[_0x4d6e50(0x176)])_0x1e2127[_0x4d6e50(0x144)]=_0x4d6e50(0x164);else{if(_0x1e2127['diPlus']>_0x1e2127[_0x4d6e50(0x14a)])_0x1e2127['trend']='up';else _0x1e2127[_0x4d6e50(0x14a)]>_0x1e2127['diPlus']&&(_0x1e2127[_0x4d6e50(0x144)]=_0x4d6e50(0x194));}}_0x1e2127['adx']=Math[_0x4d6e50(0x172)](0x0,Math[_0x4d6e50(0x182)](0x64,_0x1e2127[_0x4d6e50(0x174)])),_0x1e2127[_0x4d6e50(0x176)]=Math[_0x4d6e50(0x172)](0x0,Math[_0x4d6e50(0x182)](0x64,_0x1e2127['diPlus'])),_0x1e2127[_0x4d6e50(0x14a)]=Math[_0x4d6e50(0x172)](0x0,Math[_0x4d6e50(0x182)](0x64,_0x1e2127['diMinus']));}catch(_0x1f0905){console[_0x4d6e50(0x187)](_0x4d6e50(0x173),_0x1f0905['message']);}return _0x1e2127;}function analyzeVolume(_0x48d7ad,_0x21c9fa){var _0x1ce481=a0_0x207b;if(!_0x48d7ad||_0x48d7ad[_0x1ce481(0x189)]<0x14||!_0x21c9fa)return{'strength':0x0,'signal':'neutral','avgVolume':0x0};var _0x42df27=_0x48d7ad[_0x1ce481(0x167)](-0x14)[_0x1ce481(0x15b)](function(_0x432850){return _0x432850['v']||0x0;}),_0x1130e5=_0x42df27['reduce'](function(_0x56b129,_0x21413f){return _0x56b129+_0x21413f;},0x0)/_0x42df27['length'];if(_0x1130e5===0x0)return{'strength':0x0,'signal':'neutral','avgVolume':0x0};var _0xdc2bd3=_0x21c9fa/_0x1130e5,_0x923ca4=0x0,_0x45b7b3=_0x1ce481(0x165);if(_0xdc2bd3>=0x2)_0x923ca4=0x2,_0x45b7b3=_0x1ce481(0x140);else{if(_0xdc2bd3>=1.5)_0x923ca4=0x1,_0x45b7b3='above_average';else _0xdc2bd3<0.5&&(_0x923ca4=-0x1,_0x45b7b3='weak');}return{'strength':_0x923ca4,'signal':_0x45b7b3,'avgVolume':_0x1130e5,'ratio':_0xdc2bd3};}function detectDivergence(_0x2eee40,_0xdd36c9,_0x4c7de0){var _0x30a172=a0_0x207b;if(!_0x2eee40||!Array[_0x30a172(0x148)](_0x2eee40)||_0x2eee40[_0x30a172(0x189)]<0x1e)return{'type':'none','strength':0x0,'hidden':![]};if(!_0xdd36c9||!Array[_0x30a172(0x148)](_0xdd36c9)||_0xdd36c9[_0x30a172(0x189)]<0x1e)return{'type':'none','strength':0x0,'hidden':![]};var _0x2f3035=Math['min'](0x32,_0x2eee40[_0x30a172(0x189)],_0xdd36c9[_0x30a172(0x189)]),_0x240475=_0x2eee40[_0x30a172(0x189)]-_0x2f3035,_0x580422=_0xdd36c9[_0x30a172(0x189)]-_0x2f3035,_0x5d4f58=[];for(var _0x3d53cc=0x0;_0x3d53cc<_0x2f3035;_0x3d53cc++){var _0x593fab=_0x2eee40[_0x240475+_0x3d53cc],_0x3d5771=_0xdd36c9[_0x580422+_0x3d53cc];_0x593fab&&_0x593fab['c']&&isFinite(_0x593fab['c'])&&_0x3d5771!==undefined&&isFinite(_0x3d5771)&&_0x5d4f58[_0x30a172(0x151)]({'relativeIndex':_0x3d53cc,'price':_0x593fab['c'],'indicator':_0x3d5771});}if(_0x5d4f58['length']<0x14)return{'type':'none','strength':0x0,'hidden':![]};var _0xc006e9=[],_0x1b5973=[];for(var _0x359969=0x2;_0x359969<_0x5d4f58[_0x30a172(0x189)]-0x2;_0x359969++){var _0x418b50=_0x5d4f58[_0x359969],_0x595534=_0x418b50[_0x30a172(0x15e)]>_0x5d4f58[_0x359969-0x1]['price']&&_0x418b50[_0x30a172(0x15e)]>_0x5d4f58[_0x359969-0x2][_0x30a172(0x15e)]&&_0x418b50[_0x30a172(0x15e)]>_0x5d4f58[_0x359969+0x1][_0x30a172(0x15e)]&&_0x418b50[_0x30a172(0x15e)]>_0x5d4f58[_0x359969+0x2][_0x30a172(0x15e)],_0x59cf86=_0x418b50[_0x30a172(0x15e)]<_0x5d4f58[_0x359969-0x1][_0x30a172(0x15e)]&&_0x418b50[_0x30a172(0x15e)]<_0x5d4f58[_0x359969-0x2][_0x30a172(0x15e)]&&_0x418b50[_0x30a172(0x15e)]<_0x5d4f58[_0x359969+0x1][_0x30a172(0x15e)]&&_0x418b50['price']<_0x5d4f58[_0x359969+0x2][_0x30a172(0x15e)];_0x595534&&_0xc006e9[_0x30a172(0x151)]({'dataIndex':_0x359969,'price':_0x418b50['price'],'indicator':_0x418b50[_0x30a172(0x168)]}),_0x59cf86&&_0x1b5973['push']({'dataIndex':_0x359969,'price':_0x418b50[_0x30a172(0x15e)],'indicator':_0x418b50[_0x30a172(0x168)]});}if(_0x1b5973[_0x30a172(0x189)]>=0x2)for(var _0x545a46=_0x1b5973[_0x30a172(0x189)]-0x1;_0x545a46>=0x1;_0x545a46--){var _0x576637=_0x1b5973[_0x545a46],_0x47d4d4=_0x1b5973[_0x545a46-0x1];if(_0x576637[_0x30a172(0x15e)]<_0x47d4d4[_0x30a172(0x15e)]&&_0x576637[_0x30a172(0x168)]>_0x47d4d4[_0x30a172(0x168)]){var _0x1c2e56=Math[_0x30a172(0x182)](0x3,Math[_0x30a172(0x15a)]((_0x576637[_0x30a172(0x15e)]-_0x47d4d4[_0x30a172(0x15e)])/_0x47d4d4[_0x30a172(0x15e)]*0x64)+0x1);return{'type':'bullish','strength':Math['floor'](_0x1c2e56),'hidden':![]};}if(_0x576637[_0x30a172(0x15e)]>_0x47d4d4[_0x30a172(0x15e)]&&_0x576637[_0x30a172(0x168)]<_0x47d4d4['indicator'])return{'type':_0x30a172(0x175),'strength':0x1,'hidden':!![]};}if(_0xc006e9[_0x30a172(0x189)]>=0x2)for(var _0x2a5422=_0xc006e9['length']-0x1;_0x2a5422>=0x1;_0x2a5422--){var _0x1aebb5=_0xc006e9[_0x2a5422],_0x276d0b=_0xc006e9[_0x2a5422-0x1];if(_0x1aebb5[_0x30a172(0x15e)]>_0x276d0b[_0x30a172(0x15e)]&&_0x1aebb5[_0x30a172(0x168)]<_0x276d0b[_0x30a172(0x168)]){var _0x1c2e56=Math[_0x30a172(0x182)](0x3,Math['abs']((_0x1aebb5[_0x30a172(0x15e)]-_0x276d0b[_0x30a172(0x15e)])/_0x276d0b[_0x30a172(0x15e)]*0x64)+0x1);return{'type':_0x30a172(0x159),'strength':Math[_0x30a172(0x18c)](_0x1c2e56),'hidden':![]};}if(_0x1aebb5['price']<_0x276d0b[_0x30a172(0x15e)]&&_0x1aebb5[_0x30a172(0x168)]>_0x276d0b[_0x30a172(0x168)])return{'type':_0x30a172(0x159),'strength':0x1,'hidden':!![]};}return{'type':_0x30a172(0x18a),'strength':0x0,'hidden':![]};}function a0_0x45f6(){var _0x4f9651=['FVG','fair','message','entries','round','unknown','max','⚠️\x20ADX\x20calc\x20error:','adx','bullish','diPlus','filter','lower','includes','EMA21','hammer','strong_up','6574720vCQKhX','low','ورود\x20در\x20EMA21','1813024xNrvnL','4H\x20TF','min','ورود\x20کامل','morning_star','sources','toFixed','log','entry','length','none','excellent','floor','vwap','RSI','ورود\x20اول','VWAP','confluenceScore','high','trending_up','down','type','VWAP\x20-1σ','quality','pow','trending_down','bearish_engulfing','lowerBand1','5768880IwLzYU','histogram','bullish_engulfing','strong','short','reasons','Order\x20Block','trend','score','long','source','isArray','1369548MaYQsu','diMinus','sort','12LVZZCd','ورود\x20کامل\x20(سرمایه\x20کم)','volatility','number','sqrt','push','1646615wChxVh','reduce','strength','shooting_star','regime','evening_star','EMA50','bearish','abs','map','weight','ورود\x20دوم','price','confirmations','upper','Fib\x20','TradingCore','good','strong_down','neutral','medium','slice','indicator','3994200nQFwmR','levels','44429xvShbJ'];a0_0x45f6=function(){return _0x4f9651;};return a0_0x45f6();}function detectCandlestickPatterns(_0x7a63d3){var _0x511394=a0_0x207b;if(!_0x7a63d3||!Array[_0x511394(0x148)](_0x7a63d3)||_0x7a63d3[_0x511394(0x189)]<0x3)return{'patterns':[],'bullish':0x0,'bearish':0x0};var _0x4b8328=[],_0x354766=0x0,_0x5a815d=0x0;try{var _0x574b7c=Math['min'](0x3,_0x7a63d3[_0x511394(0x189)]);for(var _0x4be4b0=_0x7a63d3['length']-_0x574b7c;_0x4be4b0<_0x7a63d3['length'];_0x4be4b0++){if(_0x4be4b0<0x2)continue;var _0x1f5668=_0x7a63d3[_0x4be4b0],_0xb3a32b=_0x7a63d3[_0x4be4b0-0x1],_0x1b39cf=_0x7a63d3[_0x4be4b0-0x2];if(!_0x1f5668||!_0xb3a32b||!_0x1f5668['o']||!_0x1f5668['c']||!_0x1f5668['h']||!_0x1f5668['l'])continue;if(!_0xb3a32b['o']||!_0xb3a32b['c']||!_0xb3a32b['h']||!_0xb3a32b['l'])continue;var _0x3c80a3=Math['abs'](_0x1f5668['c']-_0x1f5668['o']),_0x5f3701=_0x1f5668['h']-_0x1f5668['l'],_0x424510=Math[_0x511394(0x15a)](_0xb3a32b['c']-_0xb3a32b['o']),_0x5ba8a3=_0x1f5668['c']>=_0x1f5668['o'],_0x23c36a=_0xb3a32b['c']>=_0xb3a32b['o'];_0x3c80a3<_0x5f3701*0.1&&_0x4b8328[_0x511394(0x151)]({'type':'doji','index':_0x4be4b0,'bullish':null});if(_0x4be4b0===_0x7a63d3[_0x511394(0x189)]-0x1){var _0x521a9d=Math[_0x511394(0x182)](_0x1f5668['o'],_0x1f5668['c'])-_0x1f5668['l'],_0x14e879=_0x1f5668['h']-Math[_0x511394(0x172)](_0x1f5668['o'],_0x1f5668['c']);_0x521a9d>_0x3c80a3*0x2&&_0x14e879<_0x3c80a3*0.3&&_0x5f3701>0x0&&(_0x4b8328[_0x511394(0x151)]({'type':_0x511394(0x17b),'index':_0x4be4b0,'bullish':!![]}),_0x354766+=0x2),_0x14e879>_0x3c80a3*0x2&&_0x521a9d<_0x3c80a3*0.3&&_0x5f3701>0x0&&(_0x4b8328[_0x511394(0x151)]({'type':_0x511394(0x155),'index':_0x4be4b0,'bullish':![]}),_0x5a815d+=0x2);}_0x4be4b0===_0x7a63d3[_0x511394(0x189)]-0x1&&(!_0x23c36a&&_0x5ba8a3&&_0x1f5668['o']<_0xb3a32b['c']&&_0x1f5668['c']>_0xb3a32b['o']&&_0x3c80a3>_0x424510*1.1&&(_0x4b8328[_0x511394(0x151)]({'type':_0x511394(0x13f),'index':_0x4be4b0,'bullish':!![]}),_0x354766+=0x3),_0x23c36a&&!_0x5ba8a3&&_0x1f5668['o']>_0xb3a32b['c']&&_0x1f5668['c']<_0xb3a32b['o']&&_0x3c80a3>_0x424510*1.1&&(_0x4b8328['push']({'type':_0x511394(0x19a),'index':_0x4be4b0,'bullish':![]}),_0x5a815d+=0x3));if(_0x4be4b0>=0x2&&_0x4be4b0===_0x7a63d3[_0x511394(0x189)]-0x1&&_0x1b39cf){var _0x1861aa=_0x1b39cf,_0x9910df=_0xb3a32b,_0xb07bc=_0x1f5668;if(_0x1861aa['c']&&_0x1861aa['o']&&_0x9910df['c']&&_0x9910df['o']&&_0xb07bc['c']&&_0xb07bc['o']){var _0x4a32bf=_0x1861aa['c']<_0x1861aa['o'],_0x278fad=Math[_0x511394(0x15a)](_0x9910df['c']-_0x9910df['o'])<Math[_0x511394(0x15a)](_0x1861aa['c']-_0x1861aa['o'])*0.5,_0x49e76b=_0xb07bc['c']>_0xb07bc['o'];_0x4a32bf&&_0x278fad&&_0x49e76b&&_0xb07bc['c']>(_0x1861aa['o']+_0x1861aa['c'])/0x2&&(_0x4b8328[_0x511394(0x151)]({'type':_0x511394(0x184),'index':_0x4be4b0,'bullish':!![]}),_0x354766+=0x3);var _0x1da407=_0x1861aa['c']>_0x1861aa['o'],_0x3d07a8=_0xb07bc['c']<_0xb07bc['o'];_0x1da407&&_0x278fad&&_0x3d07a8&&_0xb07bc['c']<(_0x1861aa['o']+_0x1861aa['c'])/0x2&&(_0x4b8328['push']({'type':_0x511394(0x157),'index':_0x4be4b0,'bullish':![]}),_0x5a815d+=0x3);}}}}catch(_0x2b0cd4){console[_0x511394(0x187)]('⚠️\x20Pattern\x20detection\x20error:',_0x2b0cd4[_0x511394(0x16e)]);}return{'patterns':_0x4b8328,'bullish':_0x354766,'bearish':_0x5a815d,'strongest':_0x4b8328[_0x511394(0x189)]>0x0?_0x4b8328[_0x4b8328['length']-0x1]:null};}function detectMarketRegime(_0x1a1464,_0x2c6905){var _0x6aa3b6=a0_0x207b;if(!_0x1a1464||!Array[_0x6aa3b6(0x148)](_0x1a1464)||_0x1a1464[_0x6aa3b6(0x189)]<0x32||!_0x2c6905||!isFinite(_0x2c6905))return{'regime':_0x6aa3b6(0x171),'strength':0x0,'volatility':_0x6aa3b6(0x166)};var _0x125659={'regime':'ranging','strength':0x0,'volatility':_0x6aa3b6(0x166)};try{var _0x3586e8=calcATR(_0x1a1464,0xe,_0x2c6905),_0x186df8=_0x3586e8/_0x2c6905*0x64;if(_0x186df8>0x3)_0x125659[_0x6aa3b6(0x14e)]=_0x6aa3b6(0x192);else _0x186df8<0x1&&(_0x125659[_0x6aa3b6(0x14e)]=_0x6aa3b6(0x17e));var _0x14573e=_0x1a1464[_0x6aa3b6(0x15b)](function(_0x41766e){return _0x41766e['c'];})[_0x6aa3b6(0x177)](function(_0x497163){var _0x3c1792=_0x6aa3b6;return typeof _0x497163===_0x3c1792(0x14f)&&isFinite(_0x497163)&&_0x497163>0x0;});if(_0x14573e[_0x6aa3b6(0x189)]<0x32)return _0x125659;var _0x62fe59=calcEMA(_0x14573e,0x14),_0x159d8f=calcEMA(_0x14573e,0x32),_0x34de1b=calcADX(_0x1a1464,0xe);if(_0x34de1b['adx']>=0x19){if(_0x2c6905>_0x62fe59&&_0x62fe59>_0x159d8f&&_0x34de1b[_0x6aa3b6(0x144)]['includes']('up'))_0x125659[_0x6aa3b6(0x156)]=_0x6aa3b6(0x193),_0x125659[_0x6aa3b6(0x154)]=_0x34de1b[_0x6aa3b6(0x174)];else _0x2c6905<_0x62fe59&&_0x62fe59<_0x159d8f&&_0x34de1b['trend'][_0x6aa3b6(0x179)](_0x6aa3b6(0x194))&&(_0x125659[_0x6aa3b6(0x156)]=_0x6aa3b6(0x199),_0x125659[_0x6aa3b6(0x154)]=_0x34de1b['adx']);}else _0x125659[_0x6aa3b6(0x156)]='ranging',_0x125659['strength']=0x64-_0x34de1b[_0x6aa3b6(0x174)];}catch(_0x1f8c30){console['log']('⚠️\x20Market\x20regime\x20error:',_0x1f8c30[_0x6aa3b6(0x16e)]);}return _0x125659;}function calcFibonacci(_0x3f7fa7,_0xe96f72){var _0x10431e=a0_0x207b;if(!_0x3f7fa7||_0x3f7fa7[_0x10431e(0x189)]<_0xe96f72)return null;var _0x529a29=_0x3f7fa7['slice'](-_0xe96f72),_0x6f9905=-Infinity,_0x2f0c33=Infinity,_0x34ecd7=0x0,_0x46c294=0x0;for(var _0x362769=0x0;_0x362769<_0x529a29[_0x10431e(0x189)];_0x362769++){_0x529a29[_0x362769]['h']>_0x6f9905&&(_0x6f9905=_0x529a29[_0x362769]['h'],_0x34ecd7=_0x362769),_0x529a29[_0x362769]['l']<_0x2f0c33&&(_0x2f0c33=_0x529a29[_0x362769]['l'],_0x46c294=_0x362769);}if(_0x6f9905===_0x2f0c33||!isFinite(_0x6f9905)||!isFinite(_0x2f0c33))return null;var _0x24f09a=_0x6f9905-_0x2f0c33,_0x42a251=_0x46c294<_0x34ecd7,_0x1da4c2={0x0:_0x42a251?_0x6f9905:_0x2f0c33,0.236:_0x42a251?_0x6f9905-_0x24f09a*0.236:_0x2f0c33+_0x24f09a*0.236,0.382:_0x42a251?_0x6f9905-_0x24f09a*0.382:_0x2f0c33+_0x24f09a*0.382,0.5:_0x42a251?_0x6f9905-_0x24f09a*0.5:_0x2f0c33+_0x24f09a*0.5,0.618:_0x42a251?_0x6f9905-_0x24f09a*0.618:_0x2f0c33+_0x24f09a*0.618,0.786:_0x42a251?_0x6f9905-_0x24f09a*0.786:_0x2f0c33+_0x24f09a*0.786,0x1:_0x42a251?_0x2f0c33:_0x6f9905};return{'high':_0x6f9905,'low':_0x2f0c33,'isUptrend':_0x42a251,'levels':_0x1da4c2};}function detectOrderBlocks(_0x4177c2,_0x160328){var _0x3b4bcc=a0_0x207b;if(!_0x4177c2||_0x4177c2[_0x3b4bcc(0x189)]<_0x160328+0x5)return[];var _0xb9b166=[],_0xf59be4=_0x4177c2['slice'](-(_0x160328+0x5));for(var _0x1e0745=0x2;_0x1e0745<_0xf59be4[_0x3b4bcc(0x189)]-0x2;_0x1e0745++){var _0x1743df=_0xf59be4[_0x1e0745],_0x19dbcd=_0xf59be4[_0x1e0745+0x1],_0x19973a=_0xf59be4[_0x1e0745+0x2];if(!_0x1743df||!_0x19dbcd||!_0x19973a)continue;var _0x6c6670=Math[_0x3b4bcc(0x15a)](_0x1743df['c']-_0x1743df['o']),_0x5d9420=Math['abs'](_0x19dbcd['c']-_0x19dbcd['o']),_0x436977=Math[_0x3b4bcc(0x15a)](_0x19973a['c']-_0x19973a['o']);_0x1743df['c']<_0x1743df['o']&&_0x19dbcd['c']>_0x19dbcd['o']&&_0x19973a['c']>_0x19973a['o']&&_0x5d9420+_0x436977>_0x6c6670*0x2&&_0xb9b166[_0x3b4bcc(0x151)]({'type':_0x3b4bcc(0x175),'high':_0x1743df['h'],'low':_0x1743df['l'],'strength':Math[_0x3b4bcc(0x182)](0x3,Math['floor']((_0x5d9420+_0x436977)/_0x6c6670))}),_0x1743df['c']>_0x1743df['o']&&_0x19dbcd['c']<_0x19dbcd['o']&&_0x19973a['c']<_0x19973a['o']&&_0x5d9420+_0x436977>_0x6c6670*0x2&&_0xb9b166['push']({'type':_0x3b4bcc(0x159),'high':_0x1743df['h'],'low':_0x1743df['l'],'strength':Math['min'](0x3,Math[_0x3b4bcc(0x18c)]((_0x5d9420+_0x436977)/_0x6c6670))});}return _0xb9b166['slice'](-0x3);}function detectFVG(_0xc045b8,_0x54d682){var _0x2586ba=a0_0x207b;if(!_0xc045b8||_0xc045b8[_0x2586ba(0x189)]<_0x54d682)return[];var _0x4e177d=[],_0x37a4de=_0xc045b8['slice'](-_0x54d682);for(var _0x2853f8=0x2;_0x2853f8<_0x37a4de[_0x2586ba(0x189)];_0x2853f8++){var _0x356606=_0x37a4de[_0x2853f8-0x2],_0x996b9a=_0x37a4de[_0x2853f8];if(!_0x356606||!_0x996b9a)continue;_0x996b9a['l']>_0x356606['h']&&_0x4e177d[_0x2586ba(0x151)]({'type':'bullish','high':_0x996b9a['l'],'low':_0x356606['h'],'filled':![]}),_0x996b9a['h']<_0x356606['l']&&_0x4e177d[_0x2586ba(0x151)]({'type':_0x2586ba(0x159),'high':_0x356606['l'],'low':_0x996b9a['h'],'filled':![]});}return _0x4e177d[_0x2586ba(0x167)](-0x3);}function a0_0x207b(_0x4578e5,_0x1af680){_0x4578e5=_0x4578e5-0x13e;var _0x45f636=a0_0x45f6();var _0x207b94=_0x45f636[_0x4578e5];return _0x207b94;}function calcVWAP(_0x38b7e3,_0x32e132){var _0x29c2c0=a0_0x207b;if(!_0x38b7e3||_0x38b7e3[_0x29c2c0(0x189)]<_0x32e132)return null;var _0x41acee=_0x38b7e3[_0x29c2c0(0x167)](-_0x32e132),_0x949687=0x0,_0x1b912b=0x0;for(var _0x104b31=0x0;_0x104b31<_0x41acee[_0x29c2c0(0x189)];_0x104b31++){var _0x3cddb6=_0x41acee[_0x104b31],_0xd2c2ae=(_0x3cddb6['h']+_0x3cddb6['l']+_0x3cddb6['c'])/0x3,_0x114db6=_0x3cddb6['v']||0x1;_0x949687+=_0xd2c2ae*_0x114db6,_0x1b912b+=_0x114db6;}if(_0x1b912b===0x0)return null;var _0x349ebb=_0x949687/_0x1b912b,_0x2f98e3=0x0;for(var _0x1836ba=0x0;_0x1836ba<_0x41acee[_0x29c2c0(0x189)];_0x1836ba++){var _0x207c7b=(_0x41acee[_0x1836ba]['h']+_0x41acee[_0x1836ba]['l']+_0x41acee[_0x1836ba]['c'])/0x3;_0x2f98e3+=Math['pow'](_0x207c7b-_0x349ebb,0x2);}var _0x331a0c=Math[_0x29c2c0(0x150)](_0x2f98e3/_0x41acee[_0x29c2c0(0x189)]);return{'vwap':_0x349ebb,'upperBand1':_0x349ebb+_0x331a0c,'lowerBand1':_0x349ebb-_0x331a0c,'upperBand2':_0x349ebb+_0x331a0c*0x2,'lowerBand2':_0x349ebb-_0x331a0c*0x2};}function findConfluenceZones(_0x2accae,_0x4bce91,_0x1fd4d3,_0x31a1a8,_0x15850c,_0xda3d03,_0x25f0a1,_0x190cf0,_0x1f19a8){var _0x237b18=a0_0x207b,_0x3343ff=[],_0x42cc5=_0x1f19a8*0.3,_0x5e1732=[];if(_0x1fd4d3&&_0x1fd4d3[_0x237b18(0x16a)]){var _0x554df8=[0.382,0.5,0.618,0.786];for(var _0xe10f75=0x0;_0xe10f75<_0x554df8[_0x237b18(0x189)];_0xe10f75++){var _0x3500b4=_0x1fd4d3[_0x237b18(0x16a)][_0x554df8[_0xe10f75]];_0x3500b4&&isFinite(_0x3500b4)&&_0x5e1732['push']({'price':_0x3500b4,'source':_0x237b18(0x161)+(_0x554df8[_0xe10f75]*0x64)[_0x237b18(0x186)](0x1)+'%','weight':_0x554df8[_0xe10f75]===0.618?0x2:0x1});}}if(_0x31a1a8&&_0x31a1a8[_0x237b18(0x189)]>0x0)for(var _0x4ace32=0x0;_0x4ace32<_0x31a1a8[_0x237b18(0x189)];_0x4ace32++){var _0x2b2a02=_0x31a1a8[_0x4ace32];if(_0x4bce91===_0x237b18(0x146)&&_0x2b2a02[_0x237b18(0x195)]===_0x237b18(0x175)||_0x4bce91==='short'&&_0x2b2a02[_0x237b18(0x195)]===_0x237b18(0x159)){var _0x32f030=(_0x2b2a02[_0x237b18(0x192)]+_0x2b2a02[_0x237b18(0x17e)])/0x2;_0x5e1732[_0x237b18(0x151)]({'price':_0x32f030,'source':_0x237b18(0x143),'weight':_0x2b2a02[_0x237b18(0x154)]});}}if(_0x15850c&&_0x15850c[_0x237b18(0x189)]>0x0)for(var _0x281ef7=0x0;_0x281ef7<_0x15850c['length'];_0x281ef7++){var _0x2f931c=_0x15850c[_0x281ef7];if(_0x4bce91===_0x237b18(0x146)&&_0x2f931c[_0x237b18(0x195)]===_0x237b18(0x175)||_0x4bce91===_0x237b18(0x141)&&_0x2f931c[_0x237b18(0x195)]==='bearish'){var _0x286080=(_0x2f931c[_0x237b18(0x192)]+_0x2f931c[_0x237b18(0x17e)])/0x2;_0x5e1732['push']({'price':_0x286080,'source':_0x237b18(0x16c),'weight':0x1});}}_0xda3d03&&_0xda3d03[_0x237b18(0x18d)]&&(_0x5e1732['push']({'price':_0xda3d03[_0x237b18(0x18d)],'source':_0x237b18(0x190),'weight':0x2}),_0x4bce91===_0x237b18(0x146)?_0x5e1732[_0x237b18(0x151)]({'price':_0xda3d03[_0x237b18(0x19b)],'source':_0x237b18(0x196),'weight':0x1}):_0x5e1732[_0x237b18(0x151)]({'price':_0xda3d03['upperBand1'],'source':'VWAP\x20+1σ','weight':0x1}));_0x25f0a1&&isFinite(_0x25f0a1)&&_0x5e1732[_0x237b18(0x151)]({'price':_0x25f0a1,'source':_0x237b18(0x17a),'weight':0x1});_0x190cf0&&isFinite(_0x190cf0)&&_0x5e1732[_0x237b18(0x151)]({'price':_0x190cf0,'source':_0x237b18(0x158),'weight':0x2});_0x5e1732=_0x5e1732[_0x237b18(0x177)](function(_0x3b6a09){var _0x518232=_0x237b18;return _0x3b6a09[_0x518232(0x15e)]&&isFinite(_0x3b6a09['price'])&&_0x3b6a09[_0x518232(0x15e)]>0x0;});_0x4bce91===_0x237b18(0x146)?_0x5e1732=_0x5e1732['filter'](function(_0x43c0aa){var _0x266bf4=_0x237b18;return _0x43c0aa[_0x266bf4(0x15e)]<=_0x2accae+_0x42cc5;}):_0x5e1732=_0x5e1732['filter'](function(_0x1a34be){var _0x1a4ac2=_0x237b18;return _0x1a34be[_0x1a4ac2(0x15e)]>=_0x2accae-_0x42cc5;});_0x5e1732[_0x237b18(0x14b)](function(_0x31f849,_0x533dbf){var _0x51e6de=_0x237b18;return _0x31f849[_0x51e6de(0x15e)]-_0x533dbf[_0x51e6de(0x15e)];});var _0xe10f75=0x0;while(_0xe10f75<_0x5e1732['length']){var _0x416ac8={'price':_0x5e1732[_0xe10f75][_0x237b18(0x15e)],'sources':[_0x5e1732[_0xe10f75][_0x237b18(0x147)]],'score':_0x5e1732[_0xe10f75][_0x237b18(0x15c)],'confirmations':0x1},_0x4ace32=_0xe10f75+0x1;while(_0x4ace32<_0x5e1732[_0x237b18(0x189)]&&Math[_0x237b18(0x15a)](_0x5e1732[_0x4ace32]['price']-_0x416ac8[_0x237b18(0x15e)])<=_0x42cc5){_0x416ac8[_0x237b18(0x15e)]=(_0x416ac8['price']*_0x416ac8[_0x237b18(0x15f)]+_0x5e1732[_0x4ace32]['price'])/(_0x416ac8['confirmations']+0x1),_0x416ac8['sources'][_0x237b18(0x151)](_0x5e1732[_0x4ace32][_0x237b18(0x147)]),_0x416ac8[_0x237b18(0x145)]+=_0x5e1732[_0x4ace32]['weight'],_0x416ac8[_0x237b18(0x15f)]++,_0x4ace32++;}_0x3343ff[_0x237b18(0x151)](_0x416ac8),_0xe10f75=_0x4ace32;}return _0x3343ff[_0x237b18(0x14b)](function(_0x5363d4,_0x57811b){var _0x36354a=_0x237b18;return _0x57811b[_0x36354a(0x145)]-_0x5363d4[_0x36354a(0x145)];}),_0x3343ff[_0x237b18(0x167)](0x0,0x5);}function findSmartEntry(_0x2409a2,_0x5dcd26,_0x321ef6,_0x16b5ee,_0x1e3a3e,_0x120cda,_0xf0fac3,_0x33c835){var _0x1763b3=a0_0x207b,_0x2f934a={'entry':_0x321ef6,'entries':[],'quality':'good','reasons':[],'confluenceScore':0x0};if(!_0x2409a2||_0x2409a2[_0x1763b3(0x189)]<0x32||!isFinite(_0x321ef6)||_0x321ef6<=0x0)return _0x2f934a['reasons']['push']('داده\x20کافی\x20نیست'),_0x2f934a;var _0x324a7e=calcFibonacci(_0x2409a2,0x32),_0xb6c202=_0x5dcd26?calcFibonacci(_0x5dcd26,0x1e):null,_0xfe0b3d=detectOrderBlocks(_0x2409a2,0x1e),_0x5e3bfe=detectFVG(_0x2409a2,0x14),_0x202eb3=calcVWAP(_0x2409a2,0x18),_0x8a9187=findConfluenceZones(_0x321ef6,_0x16b5ee,_0x324a7e,_0xfe0b3d,_0x5e3bfe,_0x202eb3,_0x1e3a3e,_0x120cda,_0xf0fac3);if(_0xb6c202){var _0x17d887=findConfluenceZones(_0x321ef6,_0x16b5ee,_0xb6c202,[],[],null,null,null,_0xf0fac3);for(var _0x3451d4=0x0;_0x3451d4<_0x17d887[_0x1763b3(0x189)];_0x3451d4++){_0x17d887[_0x3451d4][_0x1763b3(0x145)]+=0x2,_0x17d887[_0x3451d4][_0x1763b3(0x185)][_0x1763b3(0x151)](_0x1763b3(0x181)),_0x8a9187[_0x1763b3(0x151)](_0x17d887[_0x3451d4]);}_0x8a9187['sort'](function(_0x2748a3,_0xc34fc2){var _0x3293bb=_0x1763b3;return _0xc34fc2[_0x3293bb(0x145)]-_0x2748a3[_0x3293bb(0x145)];});}if(_0x8a9187[_0x1763b3(0x189)]===0x0)return _0x2f934a[_0x1763b3(0x188)]=_0x16b5ee===_0x1763b3(0x146)?Math[_0x1763b3(0x182)](_0x321ef6,_0x1e3a3e):Math['max'](_0x321ef6,_0x1e3a3e),_0x2f934a['reasons'][_0x1763b3(0x151)](_0x1763b3(0x17f)),_0x2f934a[_0x1763b3(0x197)]='good',_0x2f934a[_0x1763b3(0x16f)]=calculateSmartScaling(_0x2f934a[_0x1763b3(0x188)],_0x16b5ee,_0xf0fac3,_0x33c835),_0x2f934a;var _0x3852f1=_0x8a9187[0x0];_0x2f934a[_0x1763b3(0x188)]=_0x3852f1[_0x1763b3(0x15e)],_0x2f934a[_0x1763b3(0x191)]=_0x3852f1[_0x1763b3(0x145)],_0x2f934a[_0x1763b3(0x142)]=_0x3852f1[_0x1763b3(0x185)];if(_0x3852f1['confirmations']>=0x3||_0x3852f1['score']>=0x5)_0x2f934a['quality']=_0x1763b3(0x18b);else _0x3852f1[_0x1763b3(0x15f)]>=0x2||_0x3852f1[_0x1763b3(0x145)]>=0x3?_0x2f934a[_0x1763b3(0x197)]=_0x1763b3(0x163):_0x2f934a[_0x1763b3(0x197)]=_0x1763b3(0x16d);return _0x2f934a[_0x1763b3(0x16f)]=calculateSmartScaling(_0x2f934a[_0x1763b3(0x188)],_0x16b5ee,_0xf0fac3,_0x33c835,_0x8a9187),_0x2f934a;}function calculateSmartScaling(_0x1a5fa4,_0x66a09e,_0x20b502,_0x1ca719,_0x56b892){var _0x445a6d=a0_0x207b,_0x9094cc=[];if(!isFinite(_0x1a5fa4)||_0x1a5fa4<=0x0||!isFinite(_0x20b502)||_0x20b502<=0x0)return[{'price':_0x1a5fa4,'percent':0x64,'reason':_0x445a6d(0x183)}];_0x1ca719=_0x1ca719||0x3e8;if(_0x1ca719<0x1f4)_0x9094cc[_0x445a6d(0x151)]({'price':_0x1a5fa4,'percent':0x64,'reason':_0x445a6d(0x14d)});else{if(_0x1ca719<0x7d0){_0x9094cc[_0x445a6d(0x151)]({'price':_0x1a5fa4,'percent':0x3c,'reason':_0x445a6d(0x18f)});var _0x21b3e8=_0x66a09e===_0x445a6d(0x146)?_0x1a5fa4-_0x20b502*0.3:_0x1a5fa4+_0x20b502*0.3;_0x9094cc[_0x445a6d(0x151)]({'price':_0x21b3e8,'percent':0x28,'reason':'ورود\x20دوم\x20(DCA)'});}else{if(_0x1ca719<0x2710){_0x9094cc[_0x445a6d(0x151)]({'price':_0x1a5fa4,'percent':0x32,'reason':'ورود\x20اول'});var _0x21b3e8=_0x66a09e===_0x445a6d(0x146)?_0x1a5fa4-_0x20b502*0.25:_0x1a5fa4+_0x20b502*0.25;_0x9094cc[_0x445a6d(0x151)]({'price':_0x21b3e8,'percent':0x1e,'reason':_0x445a6d(0x15d)});var _0x316f9f;_0x56b892&&_0x56b892['length']>0x1?_0x316f9f=_0x56b892[0x1][_0x445a6d(0x15e)]:_0x316f9f=_0x66a09e===_0x445a6d(0x146)?_0x1a5fa4-_0x20b502*0.5:_0x1a5fa4+_0x20b502*0.5,_0x9094cc['push']({'price':_0x316f9f,'percent':0x14,'reason':'ورود\x20سوم\x20(اگر\x20رسید)'});}else{_0x9094cc[_0x445a6d(0x151)]({'price':_0x1a5fa4,'percent':0x28,'reason':_0x445a6d(0x18f)});var _0x21b3e8=_0x66a09e===_0x445a6d(0x146)?_0x1a5fa4-_0x20b502*0.2:_0x1a5fa4+_0x20b502*0.2;_0x9094cc['push']({'price':_0x21b3e8,'percent':0x19,'reason':_0x445a6d(0x15d)});var _0x316f9f=_0x66a09e===_0x445a6d(0x146)?_0x1a5fa4-_0x20b502*0.4:_0x1a5fa4+_0x20b502*0.4;_0x9094cc[_0x445a6d(0x151)]({'price':_0x316f9f,'percent':0x14,'reason':'ورود\x20سوم'});var _0x3588db=_0x66a09e===_0x445a6d(0x146)?_0x1a5fa4-_0x20b502*0.6:_0x1a5fa4+_0x20b502*0.6;_0x9094cc['push']({'price':_0x3588db,'percent':0xf,'reason':'ورود\x20چهارم\x20(اگر\x20رسید)'});}}}return _0x9094cc;}function analyzeTF(_0x33d00d,_0x47a803){var _0x5733af=a0_0x207b;if(!_0x33d00d||!Array[_0x5733af(0x148)](_0x33d00d)||_0x33d00d['length']<0x32)return{'signal':_0x5733af(0x165),'score':0x0,'rsi':0x32,'ema21':_0x47a803,'ema50':_0x47a803,'trend':'neutral'};if(!_0x47a803||!isFinite(_0x47a803)||_0x47a803<=0x0)return{'signal':'neutral','score':0x0,'rsi':0x32,'ema21':0x0,'ema50':0x0,'trend':_0x5733af(0x165)};var _0x37bb50=_0x33d00d['map'](function(_0x4c3f32){return _0x4c3f32['c'];})[_0x5733af(0x177)](function(_0x4163d1){return typeof _0x4163d1==='number'&&isFinite(_0x4163d1)&&_0x4163d1>0x0;});if(_0x37bb50[_0x5733af(0x189)]<0x32)return{'signal':_0x5733af(0x165),'score':0x0,'rsi':0x32,'ema21':_0x47a803,'ema50':_0x47a803,'trend':_0x5733af(0x165)};var _0xbaae71=calcRSI(_0x37bb50,0xe),_0x1e14ba=calcEMA(_0x37bb50,0x15),_0x2555ae=calcEMA(_0x37bb50,0x32),_0x49d9c2=calcMACD(_0x37bb50),_0x5c6883=calcBB(_0x37bb50,0x14,0x2),_0x392d1d=calcADX(_0x33d00d,0xe);if(!isFinite(_0xbaae71))_0xbaae71=0x32;if(!isFinite(_0x1e14ba)||_0x1e14ba<=0x0)_0x1e14ba=_0x47a803;if(!isFinite(_0x2555ae)||_0x2555ae<=0x0)_0x2555ae=_0x47a803;if(!_0x49d9c2||!isFinite(_0x49d9c2[_0x5733af(0x13e)]))_0x49d9c2={'histogram':0x0,'line':0x0,'signal':0x0};(!_0x5c6883||!isFinite(_0x5c6883[_0x5733af(0x160)])||!isFinite(_0x5c6883[_0x5733af(0x178)]))&&(_0x5c6883={'upper':_0x47a803*1.02,'lower':_0x47a803*0.98,'middle':_0x47a803});if(!_0x392d1d||!isFinite(_0x392d1d[_0x5733af(0x174)]))_0x392d1d={'adx':0x19,'diPlus':0x0,'diMinus':0x0,'trend':_0x5733af(0x165)};var _0x1a1ecb=_0x33d00d[_0x33d00d['length']-0x1]?_0x33d00d[_0x33d00d[_0x5733af(0x189)]-0x1]['v']:0x0,_0x1a08d4=analyzeVolume(_0x33d00d,_0x1a1ecb),_0x496f73=detectCandlestickPatterns(_0x33d00d),_0xc18c2b=detectMarketRegime(_0x33d00d,_0x47a803),_0x5bb6be=[];for(var _0x184959=0x0;_0x184959<_0x37bb50[_0x5733af(0x189)];_0x184959++){if(_0x184959>=0xe){var _0x37f3dc=_0x37bb50[_0x5733af(0x167)](0x0,_0x184959+0x1);_0x5bb6be[_0x5733af(0x151)](calcRSI(_0x37f3dc,0xe));}else _0x5bb6be[_0x5733af(0x151)](0x32);}var _0x85fc7e=detectDivergence(_0x33d00d,_0x5bb6be,_0x5733af(0x18e)),_0x2cf064=_0x5733af(0x165);if(_0x47a803>_0x1e14ba&&_0x1e14ba>_0x2555ae)_0x2cf064='up';else{if(_0x47a803<_0x1e14ba&&_0x1e14ba<_0x2555ae)_0x2cf064=_0x5733af(0x194);}var _0x2d732e=0x0,_0x54efac=0x0;if(_0xbaae71<=0x1e)_0x2d732e+=0x3;else{if(_0xbaae71<=0x28)_0x2d732e+=0x1;else{if(_0xbaae71>=0x46)_0x54efac+=0x3;else{if(_0xbaae71>=0x3c)_0x54efac+=0x1;}}}if(_0x2cf064==='up')_0x2d732e+=0x2;else{if(_0x2cf064===_0x5733af(0x194))_0x54efac+=0x2;}if(_0x49d9c2[_0x5733af(0x13e)]>0x0)_0x2d732e+=0x2;else{if(_0x49d9c2[_0x5733af(0x13e)]<0x0)_0x54efac+=0x2;}var _0x18da0b=(_0x47a803-_0x5c6883['lower'])/(_0x5c6883[_0x5733af(0x160)]-_0x5c6883[_0x5733af(0x178)]);if(_0x5c6883['upper']!==_0x5c6883['lower']&&isFinite(_0x18da0b)){if(_0x18da0b<=0.15)_0x2d732e+=0x2;else{if(_0x18da0b>=0.85)_0x54efac+=0x2;}}if(_0x392d1d[_0x5733af(0x174)]>=0x19){if(_0x392d1d['trend']==='strong_up')_0x2d732e+=0x2;else{if(_0x392d1d[_0x5733af(0x144)]===_0x5733af(0x164))_0x54efac+=0x2;}}else _0x392d1d['adx']<0x14&&(_0x2d732e=Math[_0x5733af(0x172)](0x0,_0x2d732e-0x1),_0x54efac=Math[_0x5733af(0x172)](0x0,_0x54efac-0x1));if(_0x1a08d4[_0x5733af(0x154)]>0x0){if(_0x2d732e>_0x54efac)_0x2d732e+=_0x1a08d4[_0x5733af(0x154)];else{if(_0x54efac>_0x2d732e)_0x54efac+=_0x1a08d4[_0x5733af(0x154)];}}else _0x1a08d4['strength']<0x0&&(_0x2d732e=Math[_0x5733af(0x172)](0x0,_0x2d732e-0x1),_0x54efac=Math[_0x5733af(0x172)](0x0,_0x54efac-0x1));if(_0x85fc7e[_0x5733af(0x195)]===_0x5733af(0x175))_0x2d732e+=Math[_0x5733af(0x182)](0x2,_0x85fc7e[_0x5733af(0x154)]);else _0x85fc7e[_0x5733af(0x195)]===_0x5733af(0x159)&&(_0x54efac+=Math['min'](0x2,_0x85fc7e[_0x5733af(0x154)]));if(_0x496f73[_0x5733af(0x175)]>0x0)_0x2d732e+=Math[_0x5733af(0x182)](0x2,_0x496f73[_0x5733af(0x175)]);if(_0x496f73[_0x5733af(0x159)]>0x0)_0x54efac+=Math['min'](0x2,_0x496f73['bearish']);var _0x200768=_0x5733af(0x165),_0x592bc7=0x0;if(_0x2d732e>=0x5&&_0x2d732e>_0x54efac+0x3)_0x200768=_0x5733af(0x146),_0x592bc7=_0x2d732e;else _0x54efac>=0x5&&_0x54efac>_0x2d732e+0x3&&(_0x200768=_0x5733af(0x141),_0x592bc7=_0x54efac);return{'signal':_0x200768,'score':_0x592bc7,'rsi':_0xbaae71,'ema21':_0x1e14ba,'ema50':_0x2555ae,'trend':_0x2cf064,'bb':_0x5c6883,'macd':_0x49d9c2,'adx':_0x392d1d,'volume':_0x1a08d4,'rsiDivergence':_0x85fc7e,'patterns':_0x496f73,'marketRegime':_0xc18c2b};}function getLeverage(_0xb58370,_0xf4ca09){var _0x367f55=a0_0x207b;if(!_0xb58370||!_0xf4ca09||_0xb58370===_0xf4ca09)return 0x3;var _0x21c90=Math[_0x367f55(0x15a)](_0xb58370-_0xf4ca09)/_0xb58370*0x64;if(_0x21c90>=0x5)return 0x2;if(_0x21c90>=0x3)return 0x3;if(_0x21c90>=0x2)return 0x4;return 0x5;}typeof window!=='undefined'&&(window[a0_0x115dad(0x162)]={'calcRSI':calcRSI,'calcEMA':calcEMA,'calcMACD':calcMACD,'calcBB':calcBB,'calcATR':calcATR,'calcADX':calcADX,'analyzeVolume':analyzeVolume,'detectDivergence':detectDivergence,'detectCandlestickPatterns':detectCandlestickPatterns,'detectMarketRegime':detectMarketRegime,'findSmartEntry':findSmartEntry,'calculateSmartScaling':calculateSmartScaling,'analyzeTF':analyzeTF,'getLeverage':getLeverage,'calcFibonacci':calcFibonacci,'detectOrderBlocks':detectOrderBlocks,'detectFVG':detectFVG,'calcVWAP':calcVWAP});