var a0_0x2e743f=a0_0xc46e;function a0_0x5eb1(){var _0x570922=['histogram','tradingFee','assign','push','line','exit','Test\x20size:','avgWinRate','sqrt','signal','profitFactor','fees','10298736fKYSIV','probabilityOfProfit','maxDrawdown','1884096jDgsEv','result','slMultiplier','نتایج\x20K-Fold\x20کافی\x20نیست','kFolds','remainingSize','netReturn','tp1ClosePercent','MonteCarlo','exitIndex','filter','هیچ\x20معامله‌ای\x20در\x20داده‌های\x20موجود\x20یافت\x20نشد.\x20سیگنال‌های\x20کمی\x20وجود\x20دارد.','floor','پایان\x20دوره','partialExitPrice','isPartial','type','excellent','داده\x20کافی\x20نیست','7NyTWgp','length','[Monte\x20Carlo]\x20Fallback:\x20single\x20period\x20backtest','analyzeVolume','avgProfitFactor','scenario','strong_down','4342416AbCJyB','long','strength','avgReturn','atr','exitValue','60kHhMsa','confidence','down','tp1','calcEMA','confidenceLevel','max','trainPercent','tp2','totalTrades','lower','slippage','entryPrice','[Monte\x20Carlo]\x20Train\x20size:','cos','برک‌ایون','[Monte\x20Carlo]\x20Starting\x20Walk-Forward\x20with\x20','error','calcADX','reduce','RSI\x20Oversold','initialCapital','entryIndex','riskFreeRate','\x20periods\x20after\x20','استاپ‌لاس','322865TcAMiA','moderate','slice','tp1Hit','entryFee','adx','نتایج\x20Walk-Forward\x20کافی\x20نیست','strong_up','testPercent','trend','621382mBypjP','pow','min','partialPnl','riskPercent','aggressive','6421200XBuEZC','sharpeRatio','size','map','leverage','داده\x20کافی\x20نیست\x20(حداقل\x20100\x20کندل\x20لازم\x20است)','apply','\x20candles','Trend','tp2Multiplier','periodResults','calcATR','3CYoFfu','calcRSI','holdingPeriod','تارگت\x20۱','winRate','pnl','short','tp1Multiplier','strategy','random','calcBB','simulations','reason','abs','RSI','تارگت\x20۲','exitPrice','reasons','[Monte\x20Carlo]\x20Found\x20','initialMargin','pnlPercent','2357811WslSBZ','price','neutral','log','sort'];a0_0x5eb1=function(){return _0x570922;};return a0_0x5eb1();}function a0_0xc46e(_0x4041a3,_0xd1621b){_0x4041a3=_0x4041a3-0x141;var _0x5eb118=a0_0x5eb1();var _0xc46ea1=_0x5eb118[_0x4041a3];return _0xc46ea1;}(function(_0x1d14ed,_0x4293df){var _0x358e63=a0_0xc46e,_0x1a4fbd=_0x1d14ed();while(!![]){try{var _0x38f944=-parseInt(_0x358e63(0x172))/0x1*(-parseInt(_0x358e63(0x160))/0x2)+parseInt(_0x358e63(0x187))/0x3+-parseInt(_0x358e63(0x166))/0x4+parseInt(_0x358e63(0x156))/0x5+-parseInt(_0x358e63(0x1b5))/0x6*(-parseInt(_0x358e63(0x1ae))/0x7)+-parseInt(_0x358e63(0x198))/0x8+parseInt(_0x358e63(0x19b))/0x9*(parseInt(_0x358e63(0x1bb))/0xa);if(_0x38f944===_0x4293df)break;else _0x1a4fbd['push'](_0x1a4fbd['shift']());}catch(_0x3e2e1c){_0x1a4fbd['push'](_0x1a4fbd['shift']());}}}(a0_0x5eb1,0xd456d));var MonteCarlo=(function(){var _0x4ef774={'initialCapital':0x3e8,'riskPercent':0x2,'strategy':'default','slMultiplier':1.5,'tp1Multiplier':0x2,'tp2Multiplier':3.5,'tp1ClosePercent':0x32,'leverage':0x3,'tradingFee':0.001,'slippage':0.0005,'trainPercent':0x32,'testPercent':0xf,'minPeriods':0x8,'maxPeriods':0x1e,'kFolds':0x5,'simulations':0x3e8,'confidenceLevel':0x5f,'riskFreeRate':0.05};function _0x4873a9(_0x30b725,_0x225ca5){var _0x436024=a0_0xc46e;if(!_0x30b725||_0x30b725[_0x436024(0x1af)]<0x32)return{'error':_0x436024(0x1ad)};var _0x3fdfce=Object[_0x436024(0x18e)]({},_0x4ef774,_0x225ca5||{}),_0x5e7826=_0x3fdfce[_0x436024(0x151)],_0x5daf11=_0x5e7826,_0x139493=null,_0x203fcc=[],_0x3b18b4=0x0,_0x2655c7=0x0,_0x1fdf31=[_0x5e7826],_0x518681=[];for(var _0x2f9fc8=0x32;_0x2f9fc8<_0x30b725[_0x436024(0x1af)]-0x1;_0x2f9fc8++){var _0x5e1d50=_0x30b725[_0x436024(0x158)](0x0,_0x2f9fc8+0x1),_0xc404b7=_0x30b725[_0x2f9fc8]['c'],_0x41e2f1=_0x30b725[_0x2f9fc8+0x1],_0x5c76c7=_0x3273c6(_0x5e1d50,_0xc404b7);if(_0x139493){var _0x599b8d=_0x2d1b4b(_0x139493,_0xc404b7),_0x58187f=_0x5e7826+_0x599b8d;_0x1fdf31[_0x436024(0x18f)](_0x58187f);_0x58187f>_0x5daf11&&(_0x5daf11=_0x58187f);var _0x37f407=(_0x5daf11-_0x58187f)/_0x5daf11*0x64;_0x518681['push'](_0x37f407);}else{_0x1fdf31[_0x436024(0x18f)](_0x5e7826);_0x5e7826>_0x5daf11&&(_0x5daf11=_0x5e7826);var _0x37f407=(_0x5daf11-_0x5e7826)/_0x5daf11*0x64;_0x518681[_0x436024(0x18f)](_0x37f407);}if(_0x139493){var _0x4592f8=_0x4d6c33(_0x139493,_0x41e2f1,_0x5e7826);if(_0x4592f8[_0x436024(0x191)]){var _0x59fc68=_0x2e895c(_0x4592f8[_0x436024(0x188)],_0x139493[_0x436024(0x1ab)],![]),_0x2e9452=_0x2bbbda(_0x139493,_0x59fc68,_0x4592f8[_0x436024(0x1aa)]),_0x4ea5f1=_0x2e9452[_0x436024(0x1ba)]*_0x3fdfce['tradingFee'];_0x2655c7+=_0x4ea5f1;if(_0x4592f8[_0x436024(0x1aa)]){var _0x485373=_0x2e9452[_0x436024(0x177)]-_0x4ea5f1;_0x5e7826+=_0x485373,_0x139493[_0x436024(0x1a9)]=_0x59fc68,_0x139493[_0x436024(0x163)]=_0x485373,_0x139493['remainingSize']=_0x139493[_0x436024(0x168)]*(0x1-_0x3fdfce['tp1ClosePercent']/0x64),_0x139493['tp1Hit']=!![],_0x139493['sl']=_0x139493[_0x436024(0x148)];}else _0x139493[_0x436024(0x182)]=_0x59fc68,_0x139493[_0x436024(0x1a4)]=_0x2f9fc8+0x1,_0x139493['exitReason']=_0x4592f8[_0x436024(0x17e)],_0x139493['pnl']=_0x2e9452['pnl']-_0x4ea5f1,_0x139493[_0x436024(0x186)]=_0x139493[_0x436024(0x177)]/_0x139493['initialMargin']*0x64,_0x139493[_0x436024(0x197)]=_0x139493[_0x436024(0x15a)]+_0x4ea5f1,_0x139493[_0x436024(0x174)]=_0x2f9fc8+0x1-_0x139493[_0x436024(0x152)],_0x5e7826+=_0x139493[_0x436024(0x177)],_0x203fcc['push'](_0x139493),_0x139493=null;}}if(!_0x139493&&_0x5c76c7[_0x436024(0x195)]!==_0x436024(0x189)){if(!_0x34ecef(_0x5c76c7,_0x3fdfce[_0x436024(0x17a)]))continue;var _0x16f406=_0x41e2f1['o'],_0x532ad1=_0x2e895c(_0x16f406,_0x5c76c7[_0x436024(0x195)],!![]),_0x30b0e8=_0x5c76c7[_0x436024(0x1b9)];if(!_0x30b0e8||_0x30b0e8<_0x16f406*0.001)continue;var _0x28c971,_0x255b84,_0x228e81;_0x5c76c7[_0x436024(0x195)]===_0x436024(0x1b6)?(_0x28c971=_0x532ad1-_0x30b0e8*_0x3fdfce[_0x436024(0x19d)],_0x255b84=_0x532ad1+_0x30b0e8*_0x3fdfce[_0x436024(0x179)],_0x228e81=_0x532ad1+_0x30b0e8*_0x3fdfce[_0x436024(0x16f)]):(_0x28c971=_0x532ad1+_0x30b0e8*_0x3fdfce['slMultiplier'],_0x255b84=_0x532ad1-_0x30b0e8*_0x3fdfce['tp1Multiplier'],_0x228e81=_0x532ad1-_0x30b0e8*_0x3fdfce[_0x436024(0x16f)]);var _0x5df73c=_0x5e7826*(_0x3fdfce[_0x436024(0x164)]/0x64),_0x35742d=Math['abs'](_0x532ad1-_0x28c971),_0x2c9fa0=_0x35742d/_0x532ad1,_0x2f999c=_0x5df73c/_0x2c9fa0,_0x3f9385=_0x2f999c/_0x3fdfce[_0x436024(0x16a)];_0x3f9385>_0x5e7826*0.5&&(_0x3f9385=_0x5e7826*0.5,_0x2f999c=_0x3f9385*_0x3fdfce[_0x436024(0x16a)]);var _0x478ce5=_0x2f999c*_0x3fdfce[_0x436024(0x18d)];_0x2655c7+=_0x478ce5,_0x139493={'id':++_0x3b18b4,'type':_0x5c76c7[_0x436024(0x195)],'entryPrice':_0x532ad1,'entryIndex':_0x2f9fc8+0x1,'size':_0x2f999c,'initialMargin':_0x3f9385,'leverage':_0x3fdfce[_0x436024(0x16a)],'sl':_0x28c971,'tp1':_0x255b84,'tp2':_0x228e81,'tp1Hit':![],'remainingSize':_0x2f999c,'confidence':_0x5c76c7[_0x436024(0x1bc)],'entryFee':_0x478ce5,'riskAmount':_0x5df73c};}}if(_0x139493){var _0x58d3c3=_0x30b725[_0x30b725['length']-0x1]['c'],_0x59fc68=_0x2e895c(_0x58d3c3,_0x139493[_0x436024(0x1ab)],![]),_0x2e9452=_0x2bbbda(_0x139493,_0x59fc68,![]),_0x4ea5f1=_0x2e9452[_0x436024(0x1ba)]*_0x3fdfce['tradingFee'];_0x139493[_0x436024(0x182)]=_0x59fc68,_0x139493[_0x436024(0x1a4)]=_0x30b725[_0x436024(0x1af)]-0x1,_0x139493['exitReason']=_0x436024(0x1a8),_0x139493['pnl']=_0x2e9452[_0x436024(0x177)]-_0x4ea5f1,_0x139493[_0x436024(0x186)]=_0x139493['pnl']/_0x139493[_0x436024(0x185)]*0x64,_0x139493[_0x436024(0x197)]=_0x139493[_0x436024(0x15a)]+_0x4ea5f1,_0x139493[_0x436024(0x174)]=_0x30b725[_0x436024(0x1af)]-0x1-_0x139493[_0x436024(0x152)],_0x5e7826+=_0x139493[_0x436024(0x177)],_0x203fcc[_0x436024(0x18f)](_0x139493);}return _0x262706(_0x203fcc,_0x5e7826,_0x3fdfce[_0x436024(0x151)],_0x2655c7,_0x1fdf31,_0x518681);}function _0x2d1b4b(_0x225918,_0x5243f6){var _0x17506d=a0_0xc46e,_0x7876c6=_0x5243f6-_0x225918['entryPrice'];if(_0x225918[_0x17506d(0x1ab)]===_0x17506d(0x178))_0x7876c6=-_0x7876c6;var _0x1bb589=_0x225918['tp1Hit']?_0x225918['remainingSize']:_0x225918[_0x17506d(0x168)];return _0x7876c6/_0x225918[_0x17506d(0x148)]*_0x1bb589;}function _0x2e895c(_0x42e31b,_0x33a340,_0x526717){var _0x15ee58=a0_0xc46e,_0x12930d=_0x4ef774[_0x15ee58(0x147)];return _0x33a340===_0x15ee58(0x1b6)?_0x526717?_0x42e31b*(0x1+_0x12930d):_0x42e31b*(0x1-_0x12930d):_0x526717?_0x42e31b*(0x1-_0x12930d):_0x42e31b*(0x1+_0x12930d);}function _0x3273c6(_0x1abc08,_0x28913c){var _0x2323c4=a0_0xc46e,_0x442040={'signal':_0x2323c4(0x189),'confidence':0x0,'atr':0x0,'reasons':[]};if(!_0x1abc08||_0x1abc08[_0x2323c4(0x1af)]<0x32)return _0x442040;var _0x4fccac=_0x1abc08[_0x2323c4(0x169)](function(_0x37b6e0){return _0x37b6e0['c'];}),_0x83bd74=TradingCore[_0x2323c4(0x173)](_0x4fccac,0xe),_0x12c590=TradingCore[_0x2323c4(0x1bf)](_0x4fccac,0x15),_0x491ccd=TradingCore['calcEMA'](_0x4fccac,0x32),_0x5eceef=TradingCore['calcMACD'](_0x4fccac),_0xbe4281=TradingCore[_0x2323c4(0x17c)](_0x4fccac,0x14,0x2),_0x390496=TradingCore[_0x2323c4(0x14e)](_0x1abc08,0xe),_0xc69d5a=TradingCore[_0x2323c4(0x171)](_0x1abc08,0xe,_0x28913c);_0x442040[_0x2323c4(0x1b9)]=_0xc69d5a,_0x442040[_0x2323c4(0x15b)]=_0x390496;var _0x1838f4=0x0,_0x137c6d=0x0;if(_0x83bd74<=0x19)_0x1838f4+=0x4,_0x442040[_0x2323c4(0x183)][_0x2323c4(0x18f)](_0x2323c4(0x150));else{if(_0x83bd74<=0x23)_0x1838f4+=0x2,_0x442040[_0x2323c4(0x183)][_0x2323c4(0x18f)](_0x2323c4(0x180));else{if(_0x83bd74>=0x4b)_0x137c6d+=0x4,_0x442040[_0x2323c4(0x183)]['push']('RSI\x20Overbought');else _0x83bd74>=0x41&&(_0x137c6d+=0x2,_0x442040[_0x2323c4(0x183)][_0x2323c4(0x18f)](_0x2323c4(0x180)));}}var _0x3b2f6d=_0x2323c4(0x189);if(_0x28913c>_0x12c590&&_0x12c590>_0x491ccd)_0x3b2f6d='up',_0x1838f4+=0x2,_0x442040['reasons'][_0x2323c4(0x18f)](_0x2323c4(0x16e));else _0x28913c<_0x12c590&&_0x12c590<_0x491ccd&&(_0x3b2f6d=_0x2323c4(0x1bd),_0x137c6d+=0x2,_0x442040[_0x2323c4(0x183)]['push'](_0x2323c4(0x16e)));_0x442040['trend']=_0x3b2f6d;if(_0x5eceef[_0x2323c4(0x18c)]>0x0&&_0x5eceef['line']>_0x5eceef[_0x2323c4(0x195)])_0x1838f4+=0x2;else _0x5eceef[_0x2323c4(0x18c)]<0x0&&_0x5eceef[_0x2323c4(0x190)]<_0x5eceef[_0x2323c4(0x195)]&&(_0x137c6d+=0x2);var _0x34ae90=(_0x28913c-_0xbe4281[_0x2323c4(0x146)])/(_0xbe4281['upper']-_0xbe4281[_0x2323c4(0x146)]);if(_0x34ae90<=0.1)_0x1838f4+=0x3,_0x442040[_0x2323c4(0x183)]['push']('BB');else{if(_0x34ae90<=0.2)_0x1838f4+=0x1;else{if(_0x34ae90>=0.9)_0x137c6d+=0x3,_0x442040[_0x2323c4(0x183)]['push']('BB');else _0x34ae90>=0.8&&(_0x137c6d+=0x1);}}if(_0x390496[_0x2323c4(0x15b)]>=0x19){if(_0x390496[_0x2323c4(0x15f)]===_0x2323c4(0x15d))_0x1838f4+=0x2;else _0x390496[_0x2323c4(0x15f)]===_0x2323c4(0x1b4)&&(_0x137c6d+=0x2);}else _0x390496[_0x2323c4(0x15b)]<0x14&&(_0x1838f4=Math[_0x2323c4(0x142)](0x0,_0x1838f4-0x1),_0x137c6d=Math[_0x2323c4(0x142)](0x0,_0x137c6d-0x1));var _0xf493ac=TradingCore[_0x2323c4(0x1b1)]?TradingCore[_0x2323c4(0x1b1)](_0x1abc08,_0x1abc08[_0x1abc08['length']-0x1]['v']):null;if(_0xf493ac&&_0xf493ac[_0x2323c4(0x1b7)]>0x0){if(_0x1838f4>_0x137c6d)_0x1838f4+=_0xf493ac[_0x2323c4(0x1b7)];else{if(_0x137c6d>_0x1838f4)_0x137c6d+=_0xf493ac['strength'];}}var _0x16a544=0x4,_0x16a19f=0x2;if(_0x1838f4>=_0x16a544&&_0x1838f4>_0x137c6d+_0x16a19f)_0x442040[_0x2323c4(0x195)]=_0x2323c4(0x1b6),_0x442040['confidence']=Math[_0x2323c4(0x162)](0xa,Math['round'](_0x1838f4/1.5));else _0x137c6d>=_0x16a544&&_0x137c6d>_0x1838f4+_0x16a19f&&(_0x442040['signal']=_0x2323c4(0x178),_0x442040[_0x2323c4(0x1bc)]=Math[_0x2323c4(0x162)](0xa,Math['round'](_0x137c6d/1.5)));return _0x442040;}function _0x34ecef(_0xfbe2ff,_0x43c7d9){var _0x2badff=a0_0xc46e;if(_0x43c7d9==='conservative')return _0xfbe2ff[_0x2badff(0x1bc)]>=0x6;if(_0x43c7d9==='trend_following'){if(!_0xfbe2ff[_0x2badff(0x15b)]||_0xfbe2ff[_0x2badff(0x15b)]['adx']<0x19)return![];if(_0xfbe2ff[_0x2badff(0x195)]===_0x2badff(0x1b6)&&_0xfbe2ff['trend']!=='up')return![];if(_0xfbe2ff[_0x2badff(0x195)]===_0x2badff(0x178)&&_0xfbe2ff[_0x2badff(0x15f)]!==_0x2badff(0x1bd))return![];}return!![];}function _0x4d6c33(_0x99e98,_0x6b0370,_0x211a63){var _0x1ea5d7=a0_0xc46e,_0xe2d04e={'exit':![],'price':0x0,'reason':'','isPartial':![]},_0x11e0db=_0x99e98['tp1Hit']?_0x99e98[_0x1ea5d7(0x1a0)]:_0x99e98[_0x1ea5d7(0x168)];if(_0x99e98[_0x1ea5d7(0x1ab)]===_0x1ea5d7(0x1b6)){if(_0x6b0370['l']<=_0x99e98['sl'])return _0xe2d04e[_0x1ea5d7(0x191)]=!![],_0xe2d04e[_0x1ea5d7(0x188)]=_0x99e98['sl'],_0xe2d04e['reason']=_0x99e98[_0x1ea5d7(0x159)]?_0x1ea5d7(0x14b):_0x1ea5d7(0x155),_0xe2d04e;if(!_0x99e98['tp1Hit']&&_0x6b0370['h']>=_0x99e98[_0x1ea5d7(0x1be)])return _0xe2d04e[_0x1ea5d7(0x191)]=!![],_0xe2d04e[_0x1ea5d7(0x188)]=_0x99e98[_0x1ea5d7(0x1be)],_0xe2d04e['reason']='تارگت\x20۱',_0xe2d04e[_0x1ea5d7(0x1aa)]=!![],_0xe2d04e;if(_0x6b0370['h']>=_0x99e98[_0x1ea5d7(0x144)])return _0xe2d04e[_0x1ea5d7(0x191)]=!![],_0xe2d04e[_0x1ea5d7(0x188)]=_0x99e98[_0x1ea5d7(0x144)],_0xe2d04e[_0x1ea5d7(0x17e)]=_0x1ea5d7(0x181),_0xe2d04e;}else{if(_0x6b0370['h']>=_0x99e98['sl'])return _0xe2d04e[_0x1ea5d7(0x191)]=!![],_0xe2d04e[_0x1ea5d7(0x188)]=_0x99e98['sl'],_0xe2d04e['reason']=_0x99e98['tp1Hit']?_0x1ea5d7(0x14b):'استاپ‌لاس',_0xe2d04e;if(!_0x99e98[_0x1ea5d7(0x159)]&&_0x6b0370['l']<=_0x99e98[_0x1ea5d7(0x1be)])return _0xe2d04e[_0x1ea5d7(0x191)]=!![],_0xe2d04e[_0x1ea5d7(0x188)]=_0x99e98[_0x1ea5d7(0x1be)],_0xe2d04e['reason']=_0x1ea5d7(0x175),_0xe2d04e['isPartial']=!![],_0xe2d04e;if(_0x6b0370['l']<=_0x99e98[_0x1ea5d7(0x144)])return _0xe2d04e[_0x1ea5d7(0x191)]=!![],_0xe2d04e[_0x1ea5d7(0x188)]=_0x99e98['tp2'],_0xe2d04e[_0x1ea5d7(0x17e)]=_0x1ea5d7(0x181),_0xe2d04e;}return _0xe2d04e;}function _0x2bbbda(_0xff3bf5,_0x116809,_0x1992ce){var _0x28d2e3=a0_0xc46e,_0x1b086b=_0x4ef774,_0x4eaca5=_0x1992ce?_0xff3bf5[_0x28d2e3(0x168)]*(_0x1b086b[_0x28d2e3(0x1a2)]/0x64):_0xff3bf5[_0x28d2e3(0x159)]?_0xff3bf5[_0x28d2e3(0x1a0)]:_0xff3bf5[_0x28d2e3(0x168)],_0x3ac364=_0x116809-_0xff3bf5[_0x28d2e3(0x148)];if(_0xff3bf5[_0x28d2e3(0x1ab)]===_0x28d2e3(0x178))_0x3ac364=-_0x3ac364;var _0x111117=_0x3ac364/_0xff3bf5[_0x28d2e3(0x148)]*_0x4eaca5;return{'pnl':_0x111117,'exitValue':_0x4eaca5};}function _0x262706(_0x3fa6d4,_0x4c3346,_0x2d9037,_0x5e298f,_0x281805,_0x55a5dd){var _0x1f7d1d=a0_0xc46e;if(_0x3fa6d4[_0x1f7d1d(0x1af)]===0x0)return{'totalTrades':0x0,'winRate':0x0,'profitFactor':0x0,'netReturn':0x0,'maxDrawdown':0x0,'sharpeRatio':0x0,'avgHoldingPeriod':0x0,'avgWin':0x0,'avgLoss':0x0,'largestWin':0x0,'largestLoss':0x0,'consecutiveWins':0x0,'consecutiveLosses':0x0};var _0x5d0396=_0x3fa6d4[_0x1f7d1d(0x1a5)](function(_0x2c2e1a){return _0x2c2e1a['pnl']>0x0;}),_0x4043c0=_0x3fa6d4[_0x1f7d1d(0x1a5)](function(_0x33b80d){return _0x33b80d['pnl']<=0x0;}),_0x4a8266=_0x5d0396[_0x1f7d1d(0x14f)](function(_0x1fc058,_0x309622){var _0x12cb24=_0x1f7d1d;return _0x1fc058+_0x309622[_0x12cb24(0x177)];},0x0),_0x5ed3a6=Math[_0x1f7d1d(0x17f)](_0x4043c0[_0x1f7d1d(0x14f)](function(_0x33433c,_0x553cb8){return _0x33433c+_0x553cb8['pnl'];},0x0)),_0x471278=_0x5d0396['length']/_0x3fa6d4[_0x1f7d1d(0x1af)]*0x64,_0x5467a1=_0x5ed3a6>0x0?_0x4a8266/_0x5ed3a6:_0x4a8266>0x0?0x3e7:0x0,_0x5d8290=(_0x4c3346-_0x2d9037)/_0x2d9037*0x64,_0x2b8f8f=_0x55a5dd[_0x1f7d1d(0x1af)]>0x0?Math[_0x1f7d1d(0x142)][_0x1f7d1d(0x16c)](null,_0x55a5dd):0x0,_0x3d9df8=_0x5d0396[_0x1f7d1d(0x1af)]>0x0?_0x4a8266/_0x5d0396['length']:0x0,_0x4d6b2f=_0x4043c0[_0x1f7d1d(0x1af)]>0x0?_0x5ed3a6/_0x4043c0[_0x1f7d1d(0x1af)]:0x0,_0x33c6cd=_0x5d0396['length']>0x0?Math[_0x1f7d1d(0x142)][_0x1f7d1d(0x16c)](null,_0x5d0396[_0x1f7d1d(0x169)](function(_0x2ea544){var _0x3229b7=_0x1f7d1d;return _0x2ea544[_0x3229b7(0x177)];})):0x0,_0x23f866=_0x4043c0[_0x1f7d1d(0x1af)]>0x0?Math[_0x1f7d1d(0x162)][_0x1f7d1d(0x16c)](null,_0x4043c0[_0x1f7d1d(0x169)](function(_0x27f28b){var _0x14ffd1=_0x1f7d1d;return _0x27f28b[_0x14ffd1(0x177)];})):0x0,_0x555271=0x0,_0x687a7d=0x0,_0x5c2ea4=0x0,_0x4a3f2f=0x0;_0x3fa6d4['forEach'](function(_0xd548c2){var _0x3d7d4e=_0x1f7d1d;if(_0xd548c2[_0x3d7d4e(0x177)]>0x0){_0x5c2ea4++,_0x4a3f2f=0x0;if(_0x5c2ea4>_0x555271)_0x555271=_0x5c2ea4;}else{_0x4a3f2f++,_0x5c2ea4=0x0;if(_0x4a3f2f>_0x687a7d)_0x687a7d=_0x4a3f2f;}});var _0xb11b94=_0x3fa6d4[_0x1f7d1d(0x14f)](function(_0x5e0b05,_0x153b91){var _0x41c143=_0x1f7d1d;return _0x5e0b05+(_0x153b91[_0x41c143(0x174)]||0x0);},0x0)/_0x3fa6d4['length'],_0x2dc6ed=[];for(var _0x1d6c02=0x1;_0x1d6c02<_0x281805['length'];_0x1d6c02++){var _0x4c60bc=(_0x281805[_0x1d6c02]-_0x281805[_0x1d6c02-0x1])/_0x281805[_0x1d6c02-0x1];_0x2dc6ed[_0x1f7d1d(0x18f)](_0x4c60bc);}var _0x3f6acc=_0x2dc6ed[_0x1f7d1d(0x1af)]>0x0?_0x2dc6ed['reduce'](function(_0x1a48d7,_0x2cb1f5){return _0x1a48d7+_0x2cb1f5;},0x0)/_0x2dc6ed[_0x1f7d1d(0x1af)]:0x0,_0x592334=_0x48517e(_0x2dc6ed,_0x3f6acc),_0x131fe6=_0x3f6acc*0xfc,_0x119b8a=_0x592334*Math[_0x1f7d1d(0x194)](0xfc),_0x2e24c4=_0x119b8a>0x0?(_0x131fe6-_0x4ef774[_0x1f7d1d(0x153)])/_0x119b8a:0x0,_0x2415c5=_0x2dc6ed['filter'](function(_0x15d6b1){return _0x15d6b1<0x0;}),_0x5d0e8f=_0x48517e(_0x2415c5,0x0),_0x3aad30=_0x5d0e8f>0x0?(_0x131fe6-_0x4ef774[_0x1f7d1d(0x153)])/(_0x5d0e8f*Math[_0x1f7d1d(0x194)](0xfc)):0x0,_0xe6ff16=_0x2b8f8f>0x0?_0x5d8290/_0x2b8f8f:0x0;return{'totalTrades':_0x3fa6d4[_0x1f7d1d(0x1af)],'wins':_0x5d0396[_0x1f7d1d(0x1af)],'losses':_0x4043c0['length'],'winRate':_0x471278,'profitFactor':_0x5467a1,'netReturn':_0x5d8290,'finalCapital':_0x4c3346,'maxDrawdown':_0x2b8f8f,'sharpeRatio':_0x2e24c4,'sortinoRatio':_0x3aad30,'calmarRatio':_0xe6ff16,'avgWin':_0x3d9df8,'avgLoss':_0x4d6b2f,'avgWinPercent':_0x5d0396[_0x1f7d1d(0x1af)]>0x0?_0x5d0396[_0x1f7d1d(0x14f)](function(_0x277ba1,_0x4016cc){var _0xe2c5ce=_0x1f7d1d;return _0x277ba1+_0x4016cc[_0xe2c5ce(0x186)];},0x0)/_0x5d0396[_0x1f7d1d(0x1af)]:0x0,'avgLossPercent':_0x4043c0[_0x1f7d1d(0x1af)]>0x0?_0x4043c0[_0x1f7d1d(0x14f)](function(_0x5a738b,_0x5d1920){var _0x3f86d6=_0x1f7d1d;return _0x5a738b+Math[_0x3f86d6(0x17f)](_0x5d1920[_0x3f86d6(0x186)]);},0x0)/_0x4043c0[_0x1f7d1d(0x1af)]:0x0,'largestWin':_0x33c6cd,'largestLoss':_0x23f866,'consecutiveWins':_0x555271,'consecutiveLosses':_0x687a7d,'avgHoldingPeriod':_0xb11b94,'equityCurve':_0x281805,'trades':_0x3fa6d4};}function _0x395c2e(_0x4c556b,_0x53ac3d){var _0x20c88b=a0_0xc46e;if(!_0x4c556b||_0x4c556b[_0x20c88b(0x1af)]<0x64)return{'error':_0x20c88b(0x16b)};var _0x57be5a=Object[_0x20c88b(0x18e)]({},_0x4ef774,_0x53ac3d||{}),_0x42f01e=_0x4c556b['length'];console[_0x20c88b(0x18a)](_0x20c88b(0x14c)+_0x42f01e+_0x20c88b(0x16d));var _0x1af346=_0x57be5a[_0x20c88b(0x143)]||0x28,_0x20a6ec=_0x57be5a[_0x20c88b(0x15e)]||0xc,_0x2d8c05=Math[_0x20c88b(0x1a7)](_0x42f01e*(_0x1af346/0x64)),_0x1984cf=Math[_0x20c88b(0x1a7)](_0x42f01e*(_0x20a6ec/0x64));_0x2d8c05=Math['max'](_0x2d8c05,0x32),_0x1984cf=Math[_0x20c88b(0x142)](_0x1984cf,0xf);var _0x47afa3=Math['max'](Math['floor'](_0x1984cf/0x5),0x3);console[_0x20c88b(0x18a)](_0x20c88b(0x149),_0x2d8c05,_0x20c88b(0x192),_0x1984cf,'Step:',_0x47afa3);var _0x23180c=[],_0x4d8c06=[],_0x3a5c0f=_0x57be5a['maxPeriods']||0x28,_0x13aa10=0x0,_0x55ff8c=0x0,_0xc03257=0x64;while(_0x13aa10+_0x2d8c05+_0x1984cf<=_0x42f01e&&_0x23180c[_0x20c88b(0x1af)]<_0x3a5c0f&&_0x55ff8c<_0xc03257){_0x55ff8c++;var _0x16c33c=_0x13aa10+_0x2d8c05,_0x4527a1=Math[_0x20c88b(0x162)](_0x16c33c+_0x1984cf,_0x42f01e),_0xf933dd=_0x4c556b['slice'](_0x16c33c,_0x4527a1);if(_0xf933dd[_0x20c88b(0x1af)]>=0xf){var _0x5ee6af=_0x4873a9(_0xf933dd,_0x57be5a);!_0x5ee6af[_0x20c88b(0x14d)]&&_0x5ee6af[_0x20c88b(0x145)]>=0x1&&(_0x4d8c06[_0x20c88b(0x18f)](_0x5ee6af),_0x23180c['push']({'start':_0x13aa10,'trainEnd':_0x16c33c,'testEnd':_0x4527a1,'candlesInTest':_0xf933dd['length'],'result':_0x5ee6af}));}_0x13aa10+=_0x47afa3;}console[_0x20c88b(0x18a)](_0x20c88b(0x184)+_0x23180c[_0x20c88b(0x1af)]+_0x20c88b(0x154)+_0x55ff8c+'\x20attempts');if(_0x4d8c06[_0x20c88b(0x1af)]<0x3){console['log']('[Monte\x20Carlo]\x20Trying\x20sliding\x20window\x20approach');var _0x53d7f5=Math[_0x20c88b(0x1a7)](_0x42f01e/0x5);_0x53d7f5=Math[_0x20c88b(0x142)](_0x53d7f5,0x1e),_0x23180c=[],_0x4d8c06=[];for(var _0x179b32=0x0;_0x179b32<_0x42f01e-_0x53d7f5&&_0x4d8c06[_0x20c88b(0x1af)]<_0x3a5c0f;_0x179b32+=Math['floor'](_0x53d7f5/0x3)){var _0x456d2e=_0x4c556b[_0x20c88b(0x158)](_0x179b32,_0x179b32+_0x53d7f5),_0x138f5e=_0x4873a9(_0x456d2e,_0x57be5a);!_0x138f5e[_0x20c88b(0x14d)]&&_0x138f5e[_0x20c88b(0x145)]>=0x1&&(_0x4d8c06[_0x20c88b(0x18f)](_0x138f5e),_0x23180c[_0x20c88b(0x18f)]({'start':_0x179b32,'trainEnd':_0x179b32,'testEnd':_0x179b32+_0x53d7f5,'candlesInTest':_0x53d7f5,'result':_0x138f5e}));}}if(_0x4d8c06['length']===0x0){console[_0x20c88b(0x18a)](_0x20c88b(0x1b0));var _0xa446ce=_0x4873a9(_0x4c556b,_0x57be5a);if(_0xa446ce&&!_0xa446ce[_0x20c88b(0x14d)]&&_0xa446ce[_0x20c88b(0x145)]>=0x1)_0x4d8c06[_0x20c88b(0x18f)](_0xa446ce),_0x23180c[_0x20c88b(0x18f)]({'start':0x0,'trainEnd':0x0,'testEnd':_0x42f01e,'candlesInTest':_0x42f01e,'result':_0xa446ce});else return{'error':_0x20c88b(0x1a6)};}var _0x1e0288=_0x4d8c06[_0x20c88b(0x14f)](function(_0x5c94c9,_0x437693){var _0x2d0777=_0x20c88b;return _0x5c94c9+_0x437693[_0x2d0777(0x176)];},0x0)/_0x4d8c06[_0x20c88b(0x1af)],_0x3ce95d=_0x4d8c06[_0x20c88b(0x14f)](function(_0x2d4452,_0x926992){return _0x2d4452+Math['min'](_0x926992['profitFactor'],0xa);},0x0)/_0x4d8c06[_0x20c88b(0x1af)],_0x6b6c2f=_0x4d8c06['reduce'](function(_0xa48ee4,_0x54fa17){var _0xfb173=_0x20c88b;return _0xa48ee4+_0x54fa17[_0xfb173(0x1a1)];},0x0)/_0x4d8c06['length'],_0x2b3ae8=_0x4d8c06[_0x20c88b(0x14f)](function(_0x421413,_0x1fa1d9){var _0x2035e0=_0x20c88b;return _0x421413+_0x1fa1d9[_0x2035e0(0x19a)];},0x0)/_0x4d8c06['length'],_0x4ce07b=_0x4d8c06[_0x20c88b(0x14f)](function(_0x3915d0,_0x25c9a9){var _0x15e275=_0x20c88b;return _0x3915d0+_0x25c9a9[_0x15e275(0x167)];},0x0)/_0x4d8c06['length'],_0x30dbc4=_0x4d8c06[_0x20c88b(0x14f)](function(_0x5df558,_0x438b60){var _0x4a40b3=_0x20c88b;return _0x5df558+_0x438b60[_0x4a40b3(0x145)];},0x0)/_0x4d8c06['length'],_0x56eadd=_0x48517e(_0x4d8c06[_0x20c88b(0x169)](function(_0x20a62e){var _0x55bb4a=_0x20c88b;return _0x20a62e[_0x55bb4a(0x176)];}),_0x1e0288),_0x23eb1c=_0x48517e(_0x4d8c06[_0x20c88b(0x169)](function(_0x1e338e){var _0x2a3914=_0x20c88b;return Math[_0x2a3914(0x162)](_0x1e338e[_0x2a3914(0x196)],0xa);}),_0x3ce95d),_0x31460=_0x48517e(_0x4d8c06['map'](function(_0x247f6b){var _0x223427=_0x20c88b;return _0x247f6b[_0x223427(0x1a1)];}),_0x6b6c2f),_0x384d1f=_0x48517e(_0x4d8c06[_0x20c88b(0x169)](function(_0xa7a1a5){return _0xa7a1a5['maxDrawdown'];}),_0x2b3ae8),_0x14fc87=_0x4d8c06[_0x20c88b(0x158)]()[_0x20c88b(0x18b)](function(_0x27074d,_0x3f7f0c){var _0x3ad4ee=_0x20c88b;return _0x3f7f0c['netReturn']-_0x27074d[_0x3ad4ee(0x1a1)];}),_0x1b9a32=_0x14fc87[0x0],_0x5a60d0=_0x14fc87[_0x14fc87[_0x20c88b(0x1af)]-0x1],_0x1d8e6c=_0x4d8c06[_0x20c88b(0x1a5)](function(_0x13ec82){var _0x484fe9=_0x20c88b;return _0x13ec82[_0x484fe9(0x1a1)]>0x0;})[_0x20c88b(0x1af)],_0x1ed93c=_0x1d8e6c/_0x4d8c06[_0x20c88b(0x1af)]*0x64;return{'periods':_0x23180c,'periodResults':_0x4d8c06,'stats':{'numPeriods':_0x4d8c06['length'],'avgWinRate':_0x1e0288,'avgProfitFactor':_0x3ce95d,'avgReturn':_0x6b6c2f,'avgMaxDrawdown':_0x2b3ae8,'avgSharpe':_0x4ce07b,'avgTrades':_0x30dbc4,'winRateStdDev':_0x56eadd,'profitFactorStdDev':_0x23eb1c,'returnStdDev':_0x31460,'drawdownStdDev':_0x384d1f,'bestPeriodReturn':_0x1b9a32?_0x1b9a32[_0x20c88b(0x1a1)]:0x0,'worstPeriodReturn':_0x5a60d0?_0x5a60d0[_0x20c88b(0x1a1)]:0x0,'consistencyScore':_0x1ed93c,'profitablePeriods':_0x1d8e6c}};}function _0x44f14d(_0x4b86ba,_0x42fffa){var _0xef7e6a=a0_0xc46e;if(!_0x4b86ba||_0x4b86ba[_0xef7e6a(0x1af)]<0xc8)return{'error':'داده\x20کافی\x20نیست\x20برای\x20K-Fold'};var _0x4b51b6=Object[_0xef7e6a(0x18e)]({},_0x4ef774,_0x42fffa||{}),_0x541029=_0x4b51b6[_0xef7e6a(0x19f)]||0x5,_0x33e7c5=Math[_0xef7e6a(0x1a7)](_0x4b86ba[_0xef7e6a(0x1af)]/_0x541029),_0x26bd13=[];for(var _0x3d3a46=0x0;_0x3d3a46<_0x541029;_0x3d3a46++){var _0x203fd5=_0x3d3a46*_0x33e7c5,_0xb481d7=_0x3d3a46===_0x541029-0x1?_0x4b86ba[_0xef7e6a(0x1af)]:(_0x3d3a46+0x1)*_0x33e7c5,_0x28363c=_0x4b86ba['slice'](_0x203fd5,_0xb481d7),_0x5ae15a=_0x4873a9(_0x28363c,_0x4b51b6);!_0x5ae15a[_0xef7e6a(0x14d)]&&_0x5ae15a['totalTrades']>0x0&&_0x26bd13[_0xef7e6a(0x18f)]({'fold':_0x3d3a46+0x1,'startIndex':_0x203fd5,'endIndex':_0xb481d7,'result':_0x5ae15a});}if(_0x26bd13[_0xef7e6a(0x1af)]<0x3)return{'error':_0xef7e6a(0x19e)};var _0x1c49d7=_0x26bd13[_0xef7e6a(0x14f)](function(_0x228b8a,_0x5aa6ca){var _0x14b6eb=_0xef7e6a;return _0x228b8a+_0x5aa6ca[_0x14b6eb(0x19c)][_0x14b6eb(0x176)];},0x0)/_0x26bd13[_0xef7e6a(0x1af)],_0x349d60=_0x26bd13[_0xef7e6a(0x14f)](function(_0x543137,_0x338799){var _0x3ca5c7=_0xef7e6a;return _0x543137+_0x338799[_0x3ca5c7(0x19c)]['netReturn'];},0x0)/_0x26bd13[_0xef7e6a(0x1af)],_0x1de694=_0x26bd13[_0xef7e6a(0x14f)](function(_0x5128a3,_0x35d63b){var _0x422bf7=_0xef7e6a;return _0x5128a3+Math[_0x422bf7(0x162)](_0x35d63b['result'][_0x422bf7(0x196)],0xa);},0x0)/_0x26bd13[_0xef7e6a(0x1af)],_0x4319f5=_0x48517e(_0x26bd13[_0xef7e6a(0x169)](function(_0x3055de){var _0x68e37a=_0xef7e6a;return _0x3055de['result'][_0x68e37a(0x176)];}),_0x1c49d7),_0x11fc6a=_0x48517e(_0x26bd13['map'](function(_0x55311c){var _0x68019e=_0xef7e6a;return _0x55311c[_0x68019e(0x19c)][_0x68019e(0x1a1)];}),_0x349d60);return{'kFolds':_0x541029,'foldResults':_0x26bd13,'stats':{'avgWinRate':_0x1c49d7,'avgReturn':_0x349d60,'avgProfitFactor':_0x1de694,'winRateVariance':_0x4319f5,'returnVariance':_0x11fc6a,'robustnessScore':0x64-(_0x4319f5+_0x11fc6a)/0x2}};}function _0x48517e(_0x523f5e,_0x43f010){var _0x25a4c0=a0_0xc46e;if(_0x523f5e[_0x25a4c0(0x1af)]===0x0)return 0x0;var _0x40dc8a=_0x523f5e['reduce'](function(_0x236972,_0xc92225){var _0x457010=_0x25a4c0;return _0x236972+Math[_0x457010(0x161)](_0xc92225-_0x43f010,0x2);},0x0)/_0x523f5e[_0x25a4c0(0x1af)];return Math[_0x25a4c0(0x194)](_0x40dc8a);}function _0x1a290b(_0x348f15,_0x83e1b4){var _0x119880=a0_0xc46e;if(!_0x348f15||!_0x348f15[_0x119880(0x170)]||_0x348f15[_0x119880(0x170)][_0x119880(0x1af)]===0x0)return{'error':_0x119880(0x15c)};var _0x5f5c5c=Object[_0x119880(0x18e)]({},_0x4ef774,_0x83e1b4||{}),_0x4ee653=_0x348f15[_0x119880(0x170)],_0x1b73bf=_0x4ee653[_0x119880(0x169)](function(_0x471cb3){var _0x1a6270=_0x119880;return _0x471cb3[_0x1a6270(0x1a1)];}),_0x256d45=_0x4ee653['map'](function(_0x47da05){var _0x4444c5=_0x119880;return _0x47da05[_0x4444c5(0x176)]/0x64;}),_0x3c33b3=_0x4ee653[_0x119880(0x169)](function(_0x43d5bb){var _0x56f9c5=_0x119880;return _0x43d5bb[_0x56f9c5(0x19a)];}),_0x17f69b=_0x1b73bf[_0x119880(0x14f)](function(_0x5575e4,_0x28e832){return _0x5575e4+_0x28e832;},0x0)/_0x1b73bf[_0x119880(0x1af)],_0x1df4da=_0x48517e(_0x1b73bf,_0x17f69b),_0x19dddb=_0x256d45[_0x119880(0x14f)](function(_0xcd839d,_0x1ade3e){return _0xcd839d+_0x1ade3e;},0x0)/_0x256d45['length'],_0x4767ba=_0x3c33b3[_0x119880(0x14f)](function(_0x2cd703,_0x4fc667){return _0x2cd703+_0x4fc667;},0x0)/_0x3c33b3[_0x119880(0x1af)],_0xb1ff4b=_0x1b73bf['filter'](function(_0x2f2e17){return _0x2f2e17>0x0;}),_0x5ed47c=_0x1b73bf[_0x119880(0x1a5)](function(_0x428feb){return _0x428feb<=0x0;}),_0x1294b1=_0xb1ff4b[_0x119880(0x1af)]>0x0?_0xb1ff4b[_0x119880(0x14f)](function(_0x2f959f,_0x33d265){return _0x2f959f+_0x33d265;},0x0)/_0xb1ff4b[_0x119880(0x1af)]:_0x17f69b,_0xc774ee=_0x5ed47c[_0x119880(0x1af)]>0x0?_0x5ed47c[_0x119880(0x14f)](function(_0x438d10,_0x578206){return _0x438d10+_0x578206;},0x0)/_0x5ed47c['length']:-Math['abs'](_0x17f69b),_0x55938a=_0xb1ff4b[_0x119880(0x1af)]>0x1?_0x48517e(_0xb1ff4b,_0x1294b1):_0x1df4da,_0x1112f9=_0x5ed47c[_0x119880(0x1af)]>0x1?_0x48517e(_0x5ed47c,_0xc774ee):_0x1df4da,_0x268646=[],_0x56d34d=[],_0x449c6d=[],_0x88de47=_0x5f5c5c['initialCapital'],_0x33ce48=0x1;if(_0x5f5c5c[_0x119880(0x1b3)]==='conservative')_0x33ce48=0.7;else _0x5f5c5c[_0x119880(0x1b3)]===_0x119880(0x165)&&(_0x33ce48=1.3);for(var _0xffa19f=0x0;_0xffa19f<_0x5f5c5c[_0x119880(0x17d)];_0xffa19f++){var _0x4f1601=_0x88de47,_0x1173c6=_0x4f1601,_0x893a2f=0x0,_0x2a5c2b=[],_0x592998=_0x4ee653[_0x119880(0x1af)];for(var _0xed86df=0x0;_0xed86df<_0x592998;_0xed86df++){var _0x4feb17=Math[_0x119880(0x17b)]()<_0x19dddb,_0x3d35d3=Math[_0x119880(0x17b)](),_0x15d49f=Math[_0x119880(0x17b)](),_0x49a8ab=Math[_0x119880(0x194)](-0x2*Math[_0x119880(0x18a)](_0x3d35d3))*Math[_0x119880(0x14a)](0x2*Math['PI']*_0x15d49f),_0xf344a0;_0x4feb17?(_0xf344a0=_0x1294b1*_0x33ce48+_0x49a8ab*_0x55938a,_0xf344a0=Math['max'](0.1,_0xf344a0)):(_0xf344a0=_0xc774ee*_0x33ce48+_0x49a8ab*_0x1112f9,_0xf344a0=Math[_0x119880(0x162)](-0.1,_0xf344a0));_0x2a5c2b[_0x119880(0x18f)](_0xf344a0),_0x4f1601=_0x4f1601*(0x1+_0xf344a0/0x64);_0x4f1601>_0x1173c6&&(_0x1173c6=_0x4f1601);var _0x470aa9=(_0x1173c6-_0x4f1601)/_0x1173c6*0x64;_0x470aa9>_0x893a2f&&(_0x893a2f=_0x470aa9);}var _0x30b87a=(_0x4f1601-_0x88de47)/_0x88de47*0x64;_0x268646[_0x119880(0x18f)](_0x30b87a),_0x56d34d['push'](_0x893a2f);var _0x4e1dcb=_0x2a5c2b[_0x119880(0x14f)](function(_0x2c5be6,_0xf6a3f){return _0x2c5be6+_0xf6a3f;},0x0)/_0x2a5c2b[_0x119880(0x1af)],_0x48751f=_0x48517e(_0x2a5c2b,_0x4e1dcb),_0x3bb31d=_0x48751f>0x0?_0x4e1dcb/_0x48751f*Math['sqrt'](0xc):0x0;_0x449c6d[_0x119880(0x18f)](_0x3bb31d);}_0x268646['sort'](function(_0xe51e26,_0x3d5889){return _0xe51e26-_0x3d5889;}),_0x56d34d['sort'](function(_0x3cd015,_0x5e78b4){return _0x3cd015-_0x5e78b4;}),_0x449c6d['sort'](function(_0x2f48df,_0x300d8){return _0x2f48df-_0x300d8;});var _0x3cbcbc=Math[_0x119880(0x1a7)](_0x268646[_0x119880(0x1af)]/0x2),_0x4db913=Math[_0x119880(0x1a7)](_0x268646[_0x119880(0x1af)]*0.05),_0x23050d=Math['floor'](_0x268646[_0x119880(0x1af)]*0.1),_0x41f1ab=Math[_0x119880(0x1a7)](_0x268646[_0x119880(0x1af)]*0.25),_0x3569f2=Math[_0x119880(0x1a7)](_0x268646[_0x119880(0x1af)]*0.75),_0x325bad=Math[_0x119880(0x1a7)](_0x268646[_0x119880(0x1af)]*0.9),_0x486e35=Math[_0x119880(0x1a7)](_0x268646[_0x119880(0x1af)]*0.95),_0x3cb322=_0x268646[_0x3cbcbc],_0x8af9b1=_0x268646[_0x4db913],_0x4977a7=_0x268646[_0x486e35],_0x33dd11=_0x268646[_0x119880(0x1a5)](function(_0x1f67ef){return _0x1f67ef>0x0;})['length'],_0xb9060e=_0x33dd11/_0x268646[_0x119880(0x1af)]*0x64,_0x126a0d=_0x268646[_0x119880(0x1a5)](function(_0x5e6e1a){return _0x5e6e1a>=0xa;})[_0x119880(0x1af)]/_0x268646['length']*0x64,_0x25f90c=_0x268646['filter'](function(_0x260f2c){return _0x260f2c>=0x14;})[_0x119880(0x1af)]/_0x268646['length']*0x64,_0x3347f0=_0x268646['filter'](function(_0x44a612){return _0x44a612<=-0xa;})[_0x119880(0x1af)]/_0x268646['length']*0x64,_0x2eb131=Math['floor']((0x64-_0x5f5c5c[_0x119880(0x141)])/0x2/0x64*_0x268646['length']),_0xccbd86=_0x268646[_0x2eb131],_0x18254c=_0x268646[_0x268646[_0x119880(0x1af)]-_0x2eb131-0x1],_0x45be88=0x14,_0x471173=_0x268646[0x0],_0x4b5eca=_0x268646[_0x268646[_0x119880(0x1af)]-0x1],_0x40fdef=(_0x4b5eca-_0x471173)/_0x45be88,_0x2672a2=[];for(var _0x70037f=0x0;_0x70037f<_0x45be88;_0x70037f++){var _0x5a19ff=_0x471173+_0x70037f*_0x40fdef,_0x680d62=_0x5a19ff+_0x40fdef,_0x19e235=_0x268646['filter'](function(_0x5e5180){return _0x5e5180>=_0x5a19ff&&(_0x70037f===_0x45be88-0x1?_0x5e5180<=_0x680d62:_0x5e5180<_0x680d62);})[_0x119880(0x1af)];_0x2672a2[_0x119880(0x18f)]({'binStart':_0x5a19ff,'binEnd':_0x680d62,'binMid':(_0x5a19ff+_0x680d62)/0x2,'count':_0x19e235,'percentage':_0x19e235/_0x268646[_0x119880(0x1af)]*0x64});}var _0xdb5c5e=-0x32,_0x181ec4=_0x268646['filter'](function(_0x13415b){return _0x13415b<=_0xdb5c5e;})[_0x119880(0x1af)]/_0x268646[_0x119880(0x1af)]*0x64,_0x1001fd=_0x268646[_0x119880(0x158)](0x0,_0x4db913),_0x4435a8=_0x1001fd['length']>0x0?_0x1001fd['reduce'](function(_0x514d62,_0x19c8ab){return _0x514d62+_0x19c8ab;},0x0)/_0x1001fd[_0x119880(0x1af)]:_0x8af9b1;return{'simulations':_0x5f5c5c['simulations'],'probabilityOfProfit':_0xb9060e,'medianReturn':_0x3cb322,'meanReturn':_0x268646[_0x119880(0x14f)](function(_0x3a4b96,_0x3bae92){return _0x3a4b96+_0x3bae92;},0x0)/_0x268646[_0x119880(0x1af)],'bestCase':_0x4977a7,'worstCase':_0x8af9b1,'probReturn10Plus':_0x126a0d,'probReturn20Plus':_0x25f90c,'probLoss10Plus':_0x3347f0,'expectedShortfall':_0x4435a8,'riskOfRuin':_0x181ec4,'confidenceInterval':{'lower':_0xccbd86,'upper':_0x18254c,'level':_0x5f5c5c[_0x119880(0x141)]},'percentiles':{'p5':_0x268646[_0x4db913],'p10':_0x268646[_0x23050d],'p25':_0x268646[_0x41f1ab],'p50':_0x3cb322,'p75':_0x268646[_0x3569f2],'p90':_0x268646[_0x325bad],'p95':_0x268646[_0x486e35]},'drawdownStats':{'median':_0x56d34d[_0x3cbcbc],'p95':_0x56d34d[_0x486e35],'max':_0x56d34d[_0x56d34d[_0x119880(0x1af)]-0x1]},'sharpeStats':{'median':_0x449c6d[_0x3cbcbc],'p25':_0x449c6d[_0x41f1ab],'p75':_0x449c6d[_0x3569f2]},'histogram':_0x2672a2,'allResults':_0x268646};}function _0xac1b1d(_0x67309,_0x73a1c9){var _0x2360cb=a0_0xc46e,_0x2ed159=Object[_0x2360cb(0x18e)]({},_0x4ef774,_0x73a1c9||{}),_0x441e3c=_0x395c2e(_0x67309,_0x2ed159);if(_0x441e3c['error'])return{'error':_0x441e3c['error']};var _0xb7ba40=_0x44f14d(_0x67309,_0x2ed159),_0x41f0dc=_0x1a290b(_0x441e3c,_0x2ed159);if(_0x41f0dc[_0x2360cb(0x14d)])return{'error':_0x41f0dc[_0x2360cb(0x14d)]};var _0x1627f7=_0x441e3c['stats'],_0x2d7649=_0x41f0dc,_0x2a4dcc=0x0;if(_0x1627f7[_0x2360cb(0x193)]>=0x3c)_0x2a4dcc+=0x14;else{if(_0x1627f7['avgWinRate']>=0x37)_0x2a4dcc+=0xf;else{if(_0x1627f7[_0x2360cb(0x193)]>=0x32)_0x2a4dcc+=0xa;else{if(_0x1627f7[_0x2360cb(0x193)]>=0x2d)_0x2a4dcc+=0x5;}}}if(_0x1627f7['avgProfitFactor']>=0x2)_0x2a4dcc+=0x14;else{if(_0x1627f7[_0x2360cb(0x1b2)]>=1.5)_0x2a4dcc+=0xf;else{if(_0x1627f7['avgProfitFactor']>=1.2)_0x2a4dcc+=0xa;else{if(_0x1627f7[_0x2360cb(0x1b2)]>=0x1)_0x2a4dcc+=0x5;}}}if(_0x1627f7['avgReturn']>=0x1e)_0x2a4dcc+=0x14;else{if(_0x1627f7[_0x2360cb(0x1b8)]>=0x14)_0x2a4dcc+=0xf;else{if(_0x1627f7[_0x2360cb(0x1b8)]>=0xa)_0x2a4dcc+=0xa;else{if(_0x1627f7[_0x2360cb(0x1b8)]>=0x0)_0x2a4dcc+=0x5;}}}_0x2a4dcc+=Math[_0x2360cb(0x1a7)](_0x1627f7['consistencyScore']/0x5);if(_0x2d7649[_0x2360cb(0x199)]>=0x46)_0x2a4dcc+=0x14;else{if(_0x2d7649['probabilityOfProfit']>=0x3c)_0x2a4dcc+=0xf;else{if(_0x2d7649[_0x2360cb(0x199)]>=0x32)_0x2a4dcc+=0xa;else{if(_0x2d7649[_0x2360cb(0x199)]>=0x28)_0x2a4dcc+=0x5;}}}return{'walkForward':_0x441e3c,'kFold':_0xb7ba40,'monteCarlo':_0x41f0dc,'robustnessScore':Math['min'](0x64,_0x2a4dcc),'overallVerdict':_0x4ee795(_0x2a4dcc,_0x1627f7,_0x2d7649)};}function _0x4ee795(_0x27d1a0,_0x3e3b41,_0x18de3c){var _0x4c8b07=a0_0xc46e;if(_0x27d1a0>=0x50&&_0x3e3b41['avgProfitFactor']>=1.5&&_0x18de3c[_0x4c8b07(0x199)]>=0x3c)return _0x4c8b07(0x1ac);else{if(_0x27d1a0>=0x3c&&_0x3e3b41[_0x4c8b07(0x1b2)]>=1.2&&_0x18de3c[_0x4c8b07(0x199)]>=0x37)return'good';else{if(_0x27d1a0>=0x28&&_0x18de3c['probabilityOfProfit']>=0x32)return _0x4c8b07(0x157);else return _0x27d1a0>=0x19?'risky':'avoid';}}}return{'runBacktest':_0x4873a9,'runWalkForward':_0x395c2e,'runKFoldValidation':_0x44f14d,'runMonteCarlo':_0x1a290b,'runFullTest':_0xac1b1d};}());typeof window!=='undefined'&&(window[a0_0x2e743f(0x1a3)]=MonteCarlo);